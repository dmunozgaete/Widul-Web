<<<<<<< HEAD
angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["a. m.","p. m."],DAY:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],ERANAMES:["antes de Cristo","después de Cristo"],ERAS:["a. C.","d. C."],FIRSTDAYOFWEEK:0,MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"dd-MM-y h:mm:ss a",mediumDate:"dd-MM-y",mediumTime:"h:mm:ss a","short":"dd-MM-yy h:mm a",shortDate:"dd-MM-yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤-",negSuf:"",posPre:"¤",posSuf:""}]},id:"es-cl",pluralCat:function(n){return 1===n?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}})}]),function(factory){"function"==typeof define&&define.amd?define(["moment"],factory):"object"==typeof exports?module.exports=factory(require("../moment")):factory(("undefined"!=typeof global?global:this).moment)}(function(moment){var monthsShortDot="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),monthsShort="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return moment.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(m,format){return/-MMM-/.test(format)?monthsShort[m.month()]:monthsShortDot[m.month()]},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_SÃ¡".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maÃ±ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}),angular.manifiest("app",["app.layouts","app.controllers","app.directives","app.filters","app.services","app.services.synchronizers","app.components"]),angular.module("app.components").directive("flexLoading",function(){return{restrict:"E",scope:{title:"@",legend:"@",spinner:"@"},templateUrl:"bundles/app/components/flex-loading/flex-loading.tpl.html",controller:function($scope){$scope.isIonic="undefined"!=typeof ionic,$scope.data={spinner:$scope.spinner||"lines"}},link:function(scope){var titles=["Widuleando Información"],images=["pesas-cuadrado.gif"],legends=["Las mejores y más bellas cosas del mundo no pueden ser tocadas o vistas-deben ser sentidas con el corazón","El éxito es ir de fracaso en fracaso sin perder el entusiasmo","Todos nuestros sueños se pueden hacer realidad si tenemos el coraje de perseguirlos","Si tienes todo bajo control, no te mueves lo suficientemente rápido","La acción es la llave fundamental de todo éxito","Lo que vale la pena hacerse, mejor hacerlo bien","La oportunidad para el éxito reside en la persona, no en el trabajo","El mejor argumento para decir algo, es la acción","Espera..., solo un poco mas","Ponte comodo mientras esperas...","Nos convertimos en lo que pensamos","No soy producto de mis circunstancias. Soy producto de mis decisiones","Comienza donde estas, usa lo que tienes, haz lo que puedes","Hecho es mejor que perfecto","Si haces lo que siempre has hecho, llegarás donde siempre has llegado","No esperes un cambio si haces siempre lo mismo","Cuando tienes un sueño, tienes que agarrarlo y nunca dejarlo ir"],titleOrdinal=Math.floor(Math.random()*titles.length)+0,legendOrdinal=Math.floor(Math.random()*legends.length)+0,imageOrdinal=Math.floor(Math.random()*images.length)+0;scope.data={title:scope.title||titles[titleOrdinal],legend:scope.legend||legends[legendOrdinal],image:scope.image||images[imageOrdinal]}}}}),angular.module("app.components").directive("galeInfiniteScroll",function(){return{scope:{onInfinite:"&",canLoadMore:"&",distance:"@"},templateUrl:"bundles/app/components/gale-infinite-scroll/gale-infinite-scroll.tpl.html",transclude:!0,controller:function($scope,$element){$scope.isLoading=$scope.isLoading||!1;var self=this;self.calculateDistance=function(distance){var scrollElm=$element[0],maxHeight=scrollElm.scrollTop+scrollElm.offsetHeight,distance=(distance||"2.5%").trim(),isPercent=-1!==distance.indexOf("%");return isPercent?parseFloat(distance)*maxHeight/100:parseFloat(distance)},$scope.$on("$destroy",function(){self.scrollCtrl&&self.scrollCtrl.$element&&self.scrollCtrl.$element.off("scroll",self.checkBounds),self.scrollEl&&self.scrollEl.removeEventListener&&self.scrollEl.removeEventListener("scroll",self.checkBounds)})},link:function(scope,element,attrs,ctrl){function reCalculateDistance(){distanceToHook=ctrl.calculateDistance()}var domElm=element[0],distanceToHook=null;element.bind("scroll",function(){if(distanceToHook||reCalculateDistance(),scope.isLoading===!1&&domElm.scrollTop+domElm.offsetHeight>=domElm.scrollHeight-distanceToHook&&scope.$eval(scope.canLoadMore)){scope.isLoading=!0;var defer=scope.onInfinite();defer&&defer.then?defer.then(function(){scope.isLoading=!1,reCalculateDistance()}):(scope.isLoading=!1,reCalculateDistance())}})}}}),angular.module("app.components").directive("knowledgeSelector",function(){return{restrict:"E",require:["ngModel"],scope:{ngModel:"="},transclude:!0,templateUrl:"bundles/app/components/knowledge-selector/knowledge-selector.tpl.html",compile:function(){return{post:function(scope,element,attrs){attrs.$observe("disabled",function(val){""===val&&(val=!0),scope.disabled=val})}}},controller:function($scope,$element,$knowledgeSelectorDialog){$scope.data={placeholder:$scope.placeholder,displayValue:null};var focusedClass="md-input-focused";$scope.show=function(ev){if(!$scope.disabled){var inputContainer=$element.parent();inputContainer.addClass(focusedClass),$knowledgeSelectorDialog.show(ev,{selected:$scope.ngModel,itemText:$scope.itemText,classToAdd:$element.attr("class")}).then(function(data){data&&($scope.ngModel=data),inputContainer.removeClass(focusedClass)},function(){inputContainer.removeClass(focusedClass)})}};var parent=$element.parent();if(parent.length>0){var label=parent.find("label");$scope.placeholder=label.html()}else $scope.placeholder=$element.attr("placeholder")}}}),angular.module("app.components").provider("$knowledgeSelectorDialog",function(){this.$get=function($log,$q,$mdDialog){var self={};return self.show=function(ev,config){var deferred=$q.defer();return $mdDialog.show({controller:"KnowledgeSelectorDialogController",templateUrl:"bundles/app/components/knowledge-selector/knowledge-selector-dialog.tpl.html",targetEvent:ev,clickOutsideToClose:!1,escapeToClose:!1,focusOnOpen:!0,locals:{config:config}}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self}}),angular.module("app.components").controller("KnowledgeSelectorDialogController",function($scope,$log,$q,config,$mdDialog,$Api){$scope.model={},$scope.graph={},$Api.read("Knowledges/MostRequested").success(function(data){var graphData=[];angular.forEach(data,function(item){graphData.push({key:item.name,values:[[0,item.requested]]})}),$scope.graph={mostRequested:graphData}});var ordinal=0;if($scope.valueFormatFunction=function(){return function(d){var label=$scope.graph.mostRequested[ordinal].key+(" ("+d+")");return ordinal++,label}},$scope.knowledge={onSelect:function(knowledge){knowledge&&($scope.model={name:knowledge.name,token:knowledge.token})},onClear:function(name){$scope.model={name:name}},find:function(query){var deferred=$q.defer();return $Api.kql("Knowledges",{filters:[{property:"name",operator:"contains",value:query}]}).success(function(data){deferred.resolve(data.items)}),deferred.promise}},config.selected){var selected=angular.copy(config.selected);$scope.knowledgeSelected=selected}$scope.save=function(model){$mdDialog.hide(model)},$scope.cancel=function(){$mdDialog.cancel()}}),angular.module("app.components").provider("$loadingDialog",function(){this.$get=function($log,$q,$mdDialog){var self={};return self.show=function(config){var deferred=$q.defer();return $mdDialog.show({controller:"LoadingDialogController",templateUrl:"bundles/app/components/loading-dialog/loading-dialog.tpl.html",targetEvent:config.targetEvent,clickOutsideToClose:!1,escapeToClose:!1,focusOnOpen:!1,locals:{config:config}}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self.hide=function(){$mdDialog.hide()},self}}),angular.module("app.components").controller("LoadingDialogController",function($scope,$log,config){var setting=config||{};$scope.title=setting.title||"Procesando Información",$scope.legend=setting.legend||"Espera mientras se ejecuta la solicitud"}),angular.module("app.components").directive("googleMap",function(){return{restrict:"E",scope:{coordinates:"=",title:"=",readonly:"="},templateUrl:"bundles/app/components/place-locator/google-map.tpl.html",controller:function($scope,$element,googleMapService){var coordinates=null,setMarker=function(coords){if("undefined"!=typeof google&&google.maps){var latLng={lat:coords.lat,lng:coords.lng},head=document.getElementsByTagName("head")[0],insertBeforeOriginal=head.insertBefore;head.insertBefore=function(newElement,referenceElement){newElement.href&&0===newElement.href.indexOf("http://fonts.googleapis.com/css?family=Roboto")||insertBeforeOriginal.call(head,newElement,referenceElement)};var map=new google.maps.Map($element.find("map")[0],{zoom:14,center:latLng}),marker=new google.maps.Marker({position:latLng,map:map});if($scope.title){var infowindow=new google.maps.InfoWindow({content:$scope.title});infowindow.open(map,marker)}$scope.showLoading=!1}};googleMapService.load().then(function(){coordinates&&setMarker(coordinates)}),$scope.$watch("coordinates",function(value){value?(coordinates=value,setMarker(coordinates)):$scope.showLoading=!0})}}}),angular.module("app.components").directive("placeLocator",function(){return{restrict:"E",require:["ngModel"],scope:{ngModel:"="},transclude:!0,templateUrl:"bundles/app/components/place-locator/place-locator.tpl.html",compile:function(){return{post:function(scope,element,attrs){attrs.$observe("disabled",function(val){""===val&&(val=!0),scope.disabled=val})}}},controller:function($scope,$element,$placeLocatorDialog){$scope.data={placeholder:$scope.placeholder,displayValue:null};var focusedClass="md-input-focused";$scope.show=function(ev){if(!$scope.disabled){var inputContainer=$element.parent();inputContainer.addClass(focusedClass),$placeLocatorDialog.show(ev,{selected:$scope.ngModel,itemText:$scope.itemText,classToAdd:$element.attr("class")}).then(function(data){data&&($scope.ngModel=data),inputContainer.removeClass(focusedClass)},function(){inputContainer.removeClass(focusedClass)})}};var parent=$element.parent();if(parent.length>0){var label=parent.find("label");$scope.placeholder=label.html()}else $scope.placeholder=$element.attr("placeholder");$scope.$watch("ngModel",function(value){})}}}),angular.module("app.components").provider("$placeLocatorDialog",function(){this.$get=function($log,$q,$mdDialog){var self={};return self.show=function(ev,config){var deferred=$q.defer();return $mdDialog.show({controller:"PlaceLocatorDialogController",templateUrl:"bundles/app/components/place-locator/place-locator-dialog.tpl.html",targetEvent:ev,clickOutsideToClose:!1,escapeToClose:!1,focusOnOpen:!0,locals:{config:config}}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self}}),angular.module("app.components").controller("PlaceLocatorDialogController",function($scope,$log,$q,config,$mdDialog,googleMapService,$Api){$scope.model={};var toLocatorPlace=function(apiPlace){return{token:apiPlace.token,name:apiPlace.name,tip:apiPlace.tip,capacity:apiPlace.capacity,address:{line:apiPlace.address,coordinates:{lat:apiPlace.lat,lng:apiPlace.lng}}}};if($scope.places={onSelect:function(place){place&&($scope.model=toLocatorPlace(place))},onClear:function(name){$scope.model={name:name}},find:function(query){var deferred=$q.defer();return $Api.query("Places",{filters:[{property:"name",operator:"contains",value:query}]}).success(function(data){deferred.resolve(data.items)}),deferred.promise}},$scope.address={onSelect:function(){},onClear:function(){},find:function(query){var deferred=$q.defer();return googleMapService.load().then(function(){var geocoder=new google.maps.Geocoder;geocoder.geocode({address:query},function(results,status){if(status===google.maps.GeocoderStatus.OK){var items=[];angular.forEach(results,function(result){items.push({line:result.formatted_address,coordinates:{lat:result.geometry.location.lat(),lng:result.geometry.location.lng()}})}),deferred.resolve(items)}else deferred.resolve([])})}),deferred.promise}},config.selected){var place=toLocatorPlace(config.selected);$scope.model=place,$scope.place=place}$scope.save=function(place){var data={name:place.name,address:place.address.line,lat:place.address.coordinates.lat,lng:place.address.coordinates.lng,capacity:place.capacity,tip:place.tip};place.token&&(data.token=place.token),$log.debug(data),$mdDialog.hide(data)},$scope.cancel=function(){$mdDialog.cancel()}}),angular.module("app.components").service("googleMapService",function($window,$q){function loadScript(){var script=document.createElement("script");script.src="//maps.googleapis.com/maps/api/js?sensor=false&language=en&callback=initGoogleMaps",document.body.appendChild(script)}var deferreds=[];return{load:function(){var deferred=$q.defer();if("undefined"!=typeof google&&google.maps)deferred.resolve();else{if(deferreds.length>0)return deferreds.push(deferred),deferred.promise;$window.initGoogleMaps=function(){angular.forEach(deferreds,function(deferred){deferred.resolve()}),deferreds=[],delete $window.initGoogleMaps},deferreds.push(deferred),loadScript()}return deferred.promise}}}),angular.module("app.components").directive("preloadImage",function(){return{restrict:"E",scope:{ngSrc:"=",onStart:"=",onComplete:"=",onError:"=",loadingTitle:"@",loadingLegend:"@",cssgramFilter:"@",loadingSpinner:"@",hideLoader:"="},templateUrl:"bundles/app/components/preload-image/preload-image.tpl.html",controller:function($scope,$element){$scope.loadingSpinner=$scope.loadingSpinner||"lines",$scope.hideLoader=$scope.hideLoader||!1,$scope._load=function(){var image=new Image;image.onload=function(){if("function"==typeof $scope.onComplete&&$scope.onComplete({width:this.width,height:this.height}),$scope.loadComplete=!0,"undefined"!=typeof ionic){var n=document.createTextNode(" ");$element.append(n),$element[0].style.webkitTransform="scale(1)"}try{$scope.$digest()}catch(e){}},image.onerror=function(){$scope.loadError=!0,"function"==typeof $scope.onError&&$scope.onError()},image.src=$scope.ngSrc,"function"==typeof $scope.onStart&&$scope.onStart(image)},$scope.ngSrc&&$scope._load($scope.ngSrc)},link:function($scope){$scope.$watch("ngSrc",function(value){value&&$scope._load(value)})}}}),angular.module("app.components").directive("externalAuthenticators",function(){return{restrict:"E",scope:{onAuthenticate:"=",onError:"=",onChangeState:"="},templateUrl:"bundles/app/components/security/external-authenticators/external-authenticators.tpl.html",controller:function($scope,$element,$q,$Configuration,$Identity,Facebook,$Api){$scope.signature=$Configuration.get("application");var changeState=function(new_state){var state={};switch(new_state){case"authorizing":state={disabled:!0};break;case"normal":state={disabled:!1}}state.name=new_state,$scope.state=state,$scope.onChangeState&&$scope.onChangeState(state)},throwError=function(message){changeState("normal"),$scope.onError(message)};$scope.login=function(type){switch(changeState("authorizing"),type){case"facebook":Facebook.login(function(response){if("connected"===response.status){var accessToken=response.authResponse.accessToken;Facebook.api("me/?fields=id,email,name,picture.type(large),location",function(data){data.accessToken=accessToken,data.image=data.picture.data.url,delete data.picture,$Api.create("/Security/Oauth/Facebook",data).success(function(oauthToken){$Identity.logIn(oauthToken),$scope.onAuthenticate(data)}).error(throwError)})}else throwError("FB Error: "+response.status)},{scope:"email,user_friends"});break;case"google":}},changeState("normal"),$scope.login("facebook")}}}),angular.module("app.components").directive("identityBox",function(){return{restrict:"E",scope:{},templateUrl:"bundles/app/components/security/identity-box/identity-box.tpl.html",controller:function($scope,$element,$q,$Identity,$rootScope,$restrictedAccess){var isAuthenticated=$scope.isAuthenticated=$Identity.isAuthenticated();isAuthenticated&&($scope.user=$Identity.getCurrent()),$scope.logIn=function(){$restrictedAccess.validate()},$scope.logOut=function(){$Identity.logOut({redirectToLoginPage:!1})},$rootScope.$on("auth-login-success",function(){isAuthenticated=$scope.isAuthenticated=!0,$scope.user=$Identity.getCurrent()}),$rootScope.$on("auth-logout-success",function(){isAuthenticated=$scope.isAuthenticated=!1,delete $scope.user})}}}),angular.module("app.components").directive("restrictedAccessDialog",function(){return{restrict:"E",scope:{onUpdateState:"=?",onAuthenticationFails:"=?",onAuthenticationSuccess:"=?"},templateUrl:"bundles/app/components/security/restricted-access/restricted-access-dialog.tpl.html",controller:function($scope,$element,$q,$Configuration,$mdToast,$timeout){function destroy(){$element.addClass("ng-hide");var delay=$timeout(function(){$element.remove(),$timeout.cancel(delay)},400)}$scope.signature=$Configuration.get("application"),$scope._onUpdateState=function(new_state){$scope.state=new_state,$scope.onUpdateState&&$scope.onUpdateState(new_state)},$scope._onAuthenticationFails=function(message){throw $mdToast.show($mdToast.simple().content("Error de Identificación: Intentalo denuevo!").position("bottom left").hideDelay(3e3)),destroy(),$scope.onAuthenticationFails&&$scope.onAuthenticationFails(message),{message:message}},$scope._onAuthenticationSuccess=function(identity){destroy(),$scope.onAuthenticationSuccess&&$scope.onAuthenticationSuccess(identity)},$scope.close=function(){$scope._onAuthenticationFails("user_cancel")},$scope.$on("$destroy",destroy)}}}),angular.module("app.components").provider("$restrictedAccess",function(){this.$get=function($log,$q,$timeout,$Identity,$compile,$rootScope){var self={};return self.validate=function(){var deferred=$q.defer(),delay=$timeout(function(){if($timeout.cancel(delay),$Identity.isAuthenticated())return void deferred.resolve();scope=$rootScope.$new(),scope.onAuthenticationFails=function(message){deferred.reject(message)},scope.onAuthenticationSuccess=function(identity){deferred.resolve(identity)};var dialog=$compile("<restricted-access-dialog class='ng-hide-animate ng-show-add' on-authentication-fails='onAuthenticationFails' on-authentication-success='onAuthenticationSuccess' />")(scope);angular.element(document.body).append(dialog)},0);return deferred.promise},self}}),angular.module("app.components").provider("$uploadFile",function(){var _endpoint=null;this.setFileEndpoint=function(endpoint){_endpoint=endpoint};var getFileEndpoint=function(){return _endpoint};this.$get=function($log,$Api){return _endpoint||(_endpoint=$Api.getEndpoint()+"/File/"),{getFileEndpoint:getFileEndpoint}}}),angular.module("app.components").directive("uploadFile",function(){return{restrict:"E",scope:{ngDisabled:"=",ngModel:"=",onStart:"&",onSend:"&",onProgressChange:"&",onComplete:"&",onError:"&"},templateUrl:"bundles/app/components/upload/upload-file.tpl.html",controller:function($scope,$element,$upload,$Identity,$uploadFile){$scope.ngDisabled=$scope.ngDisabled||!1;var getFileUrl=function(token){var url=$uploadFile.getFileEndpoint()+token;return $Identity.isAuthenticated()&&(url=url+"?access_token="+$Identity.getAccessToken()),url};$scope.ngModel&&($scope.fileUrl=getFileUrl($scope.ngModel)),$scope.upload=function(files){if(files&&files.length){$scope.uploadData={options:{thickness:5,mode:"gauge",total:100},progress:[{label:"Subiendo...",value:0,color:"#FF5722",suffix:"%"}]},$scope.onStart()&&$scope.onStart()(files);for(var throttled=_.throttle(function(value){$scope.onProgressChange()&&$scope.onProgressChange()(value),$scope.uploadData&&($scope.uploadData.progress[0].value=value)},300),_progress=function(evt){var progressPercentage=parseInt(100*evt.loaded/evt.total);throttled(progressPercentage)},_success=function(data,status,headers,config){var token=_.first(data).token,url=getFileUrl(token);if($scope.onComplete()){var custom_url=$scope.onComplete()(data,status,headers,config);custom_url&&(url=custom_url)}$scope.ngModel=token,$scope.fileUrl=url,$scope.uploadData=null},_error=function(data,status,headers,config){$scope.onError()&&$scope.onError()(data,status,headers,config),$scope.uploadData=null},i=0;i<files.length;i++){var file=files[i],headers={};$Identity.isAuthenticated()&&(headers.Authorization="{0} {1}".format([$Identity.getTokenType(),$Identity.getAccessToken()])),$scope.onSend()&&$scope.onSend()(headers);var config={url:$uploadFile.getFileEndpoint(),file:file,headers:headers};$upload.upload(config).progress(_progress).success(_success).error(_error)}}},$scope.$on("$destroy",function(){})},link:function(){}}}),angular.module("app.filters").filter("file",function($Api,$Identity,$Configuration,$uploadFile){return function(resource){var url=resource;return url?($Identity.isAuthenticated()&&(url+="?access_token="+$Identity.getAccessToken()),url=$uploadFile.getFileEndpoint()+url):null}}),angular.module("app.services").provider("ApplicationCleanse",function(){var $ref=this,_debug=!1;this.debug=function(){return _debug=!0,$ref},this.$get=function($log,$q){var self={};return self.clean=function(){var defer=$q.defer();return defer.resolve(),defer.promise},self}}),function(){var _module="app.services.synchronizers",_debug=!1,_autoLoad=!1,_autoStart=!1,_getReflectedSynchronizers=function($injector){var classes=[],services=angular.module(_module)._invokeQueue;return angular.forEach(services,function(ngClass){var type=ngClass[1],args=ngClass[2];if("service"===type&&args&&args.length>0&&"string"==typeof args[0]){var reflectedTypeName=args[0],reflectedType=$injector.get(reflectedTypeName);if("undefined"==typeof reflectedType.synchronize)throw{message:"Synchronizer: type {0} is not a synchronizer.".format([reflectedTypeName])};classes.push({type:reflectedTypeName,instance:reflectedType})}}),classes};angular.module(_module).provider("Synchronizer",function(){var $ref=this,StateType={INITIALIZED:1,CONFIGURATED:2,SYNCHRONIZING:3,WAITING:4,STOPPED:5},_frequency=15e3;this.frequency=function(frequency){return _frequency>0&&(_frequency=frequency),$ref},this.debug=function(){return _debug=!0,$ref},this.autoLoadSynchronizers=function(){return _autoLoad=!0,$ref},this.autoStart=function(){return _autoStart=!0,$ref},this.$get=function($log,$q,BaseEventHandler){var self=Object.create(BaseEventHandler),_synchronizers=[],_started=!1,checkIsPromise=function(synchronizer,value){if(!value.then)throw{message:"Synchronizer: You must return a promise (via $q) on method for {0}".format([synchronizer.alias])}};self.add=function(service,alias){_debug&&$log.debug("Synchronizer: add {0}".format([alias]),service);var synchronizer={alias:alias,state:StateType.INITIALIZED,instance:service};return _synchronizers.push(synchronizer),_started?configure(synchronizer):void 0},self.start=function(){var defer=$q.defer(),configures=[];return angular.forEach(_synchronizers,function(item){if(item.state===StateType.INITIALIZED){var promise=configure(item);configures.push(promise)}}),$q.all(configures).then(function(){_started=!0,angular.forEach(_synchronizers,function(item){item.state===StateType.INITIALIZED&&synchronize(item)}),defer.resolve()}),defer.promise};var configure=function(item){var deferred=null;return"function"==typeof item.instance.configure?(_debug&&$log.debug("Synchronizer: configuring {0}".format([item.alias])),deferred=item.instance.configure(),checkIsPromise(item,deferred),deferred.then(function(){_debug&&$log.debug("Synchronizer: configurated {0}".format([item.alias]))})):deferred=$q.defer().resolve().promise,deferred},synchronize=function(item){var syncStep=$q.defer();syncStep.promise.then(function(state){var end=new Date,sync_state={state:state,elapsed:moment(end-start).format("mm:ss.SSS")};item.last_synchronization=sync_state,_debug&&$log.debug("Synchronizer: {0} synchronized".format([item.alias]),sync_state),item.state=StateType.WAITING,setTimeout(function(){synchronize(item)},_frequency)}),_debug&&$log.debug("Synchronizer: {0} is synchronizing".format([item.alias]));var start=new Date;item.state=StateType.SYNCHRONIZING;var deferred=item.instance.synchronize();checkIsPromise(item,deferred),deferred.then(function(){syncStep.resolve("SUCCESS")},function(){syncStep.resolve("ERROR")})};return self}}).run(function(Synchronizer,$log,$injector){if(_autoLoad){var synchronizers=_getReflectedSynchronizers($injector);angular.forEach(synchronizers,function(synchronizer){Synchronizer.add(synchronizer.instance,synchronizer.type)})}_autoStart&&Synchronizer.start(),_debug&&$log.info("Synchronizer: Active")})}(),angular.module("app.services").service("Wizard",function(){var self={},wizard={};return self.addStep=function(data,identifier,prefix){if(!identifier)throw{message:"identifier can't be empty"};"undefined"==typeof prefix&&(prefix=identifier);var cloneData=angular.copy(data,{});wizard[identifier]={prefix:prefix,fields:cloneData}},self.getStep=function(identifier){return wizard[identifier]},self.clear=function(){wizard={}},self.toCollection=function(resolver){var collections=[];for(var section in wizard){var configuration=wizard[section];for(var fieldName in configuration.fields){var fullname=fieldName;configuration.prefix.length>0&&(fullname="{0}_{1}".format([configuration.prefix,fieldName]));var resolverValue,value=configuration.fields[fieldName];if(resolver&&(resolverValue=resolver(value,fieldName,fullname)),"undefined"!=typeof resolverValue?value=resolverValue:"object"==typeof value&&value.token&&(value=value.token),"undefined"==typeof value||null===value)throw{message:"can't resolve value for "+fullname};collections.push({name:fullname,value:value})}}return collections},self}),angular.module("material-icons",["ngMaterial"]).config(function($mdIconProvider){var bundle_src="bundles/material-icons/svg/icons/{0}-icons.svg";angular.forEach(["action","alert","av","communication","content","device","editor","file","hardware","icons","image","maps","navigation","notification","social","toggle"],function(toolset){$mdIconProvider.iconSet(toolset,bundle_src.format([toolset]),24)})}),function(){var api_endpoint=null,delay_response=0;angular.manifiest("mocks",["mocks.api"],["ngMockE2E"]).provider("Mocks",function(){var $ref=this,_enable=!1,_debug=!1;this.enable=function(){return _enable=!0,$ref},this.isEnabled=function(){return _enable},this.debug=function(){return _debug=!0,$ref},this.setDelay=function(miliseconds){return miliseconds>0&&(delay_response=miliseconds),$ref},this.$get=function($httpBackend,$Api){var endpoint=$Api.getEndpoint(),build=function(api){var exp=new RegExp(endpoint+api);return exp},when=function(verb,url,callback){if(_enable){verb=(verb||"GET").toUpperCase();return _debug&&console.debug("mock:",build(url)),$httpBackend.when(verb,build(url)).respond(callback)}};return{when:when,isEnabled:$ref.isEnabled,whenGET:function(url,callback){return when("GET",url,callback)},whenPOST:function(url,callback){return when("POST",url,callback)},whenPUT:function(url,callback){return when("PUT",url,callback)},whenDELETE:function(url,callback){return when("DELETE",url,callback)}}}}).config(function($provide){$provide.decorator("$httpBackend",function($delegate){var proxy=function(method,url,data,callback,headers){var interceptor=function(){var _this=this,_arguments=arguments;if(api_endpoint){var _delay=0;url.indexOf(api_endpoint)>=0&&(_delay=delay_response),setTimeout(function(){callback.apply(_this,_arguments)},_delay)}else callback.apply(_this,_arguments)};return $delegate.call(this,method,url,data,interceptor,headers)};for(var key in $delegate)proxy[key]=$delegate[key];return proxy})}).run(function($Api,$httpBackend){api_endpoint=$Api.getEndpoint(),$httpBackend.whenPOST(/.*/).passThrough(),$httpBackend.whenPUT(/.*/).passThrough(),$httpBackend.whenGET(/.*/).passThrough(),$httpBackend.whenDELETE(/.*/).passThrough()})}(),function(window,angular,undefined){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8061_STR)){var date=new Date(0),tzHour=0,tzMin=0;return match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),date.setUTCFullYear(toInt(match[1]),toInt(match[2])-1,toInt(match[3])),date.setUTCHours(toInt(match[4]||0)-tzHour,toInt(match[5]||0)-tzMin,toInt(match[6]||0),toInt(match[7]||0)),date}return string}function toInt(str){return parseInt(str,10)}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function createHttpBackendMock($rootScope,$timeout,$delegate,$browser){function createResponse(status,data,headers,statusText){return angular.isFunction(status)?status:function(){return angular.isNumber(status)?[status,data,headers,statusText]:[200,status,data,headers]}}function $httpBackend(method,url,data,callback,headers,timeout,withCredentials){function prettyPrint(data){return angular.isString(data)||angular.isFunction(data)||data instanceof RegExp?data:angular.toJson(data)}function wrapResponse(wrapped){function handleResponse(){var response=wrapped.response(method,url,data,headers,wrapped.params(url));xhr.$$respHeaders=response[2],callback(copy(response[0]),copy(response[1]),xhr.getAllResponseHeaders(),copy(response[3]||""))}function handleTimeout(){for(var i=0,ii=responses.length;ii>i;i++)if(responses[i]===handleResponse){responses.splice(i,1),callback(-1,undefined,"");break}}return!$browser&&timeout&&(timeout.then?timeout.then(handleTimeout):$timeout(handleTimeout,timeout)),handleResponse}var xhr=new MockXhr,expectation=expectations[0],wasExpected=!1;if(expectation&&expectation.match(method,url)){if(!expectation.matchData(data))throw new Error("Expected "+expectation+" with different data\nEXPECTED: "+prettyPrint(expectation.data)+"\nGOT:      "+data);if(!expectation.matchHeaders(headers))throw new Error("Expected "+expectation+" with different headers\nEXPECTED: "+prettyPrint(expectation.headers)+"\nGOT:      "+prettyPrint(headers));if(expectations.shift(),expectation.response)return void responses.push(wrapResponse(expectation));wasExpected=!0}for(var definition,i=-1;definition=definitions[++i];)if(definition.match(method,url,data,headers||{})){if(definition.response)($browser?$browser.defer:responsesPush)(wrapResponse(definition));else{if(!definition.passThrough)throw new Error("No response defined !");$delegate(method,url,data,callback,headers,timeout,withCredentials);

}return}throw new Error(wasExpected?"No response defined !":"Unexpected request: "+method+" "+url+"\n"+(expectation?"Expected "+expectation:"No more request expected"))}function parseRoute(url){var ret={regexp:url},keys=ret.keys=[];return url&&angular.isString(url)?(url=url.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(_,slash,key,option){var optional="?"===option?option:null,star="*"===option?option:null;return keys.push({name:key,optional:!!optional}),slash=slash||"",""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+?)"||"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1"),ret.regexp=new RegExp("^"+url,"i"),ret):ret}function createShortMethods(prefix){angular.forEach(["GET","DELETE","JSONP","HEAD"],function(method){$httpBackend[prefix+method]=function(url,headers,keys){return $httpBackend[prefix](method,url,undefined,headers,keys)}}),angular.forEach(["PUT","POST","PATCH"],function(method){$httpBackend[prefix+method]=function(url,data,headers,keys){return $httpBackend[prefix](method,url,data,headers,keys)}})}var definitions=[],expectations=[],responses=[],responsesPush=angular.bind(responses,responses.push),copy=angular.copy;return $httpBackend.when=function(method,url,data,headers,keys){var definition=new MockHttpExpectation(method,url,data,headers,keys),chain={respond:function(status,data,headers,statusText){return definition.passThrough=undefined,definition.response=createResponse(status,data,headers,statusText),chain}};return $browser&&(chain.passThrough=function(){return definition.response=undefined,definition.passThrough=!0,chain}),definitions.push(definition),chain},createShortMethods("when"),$httpBackend.whenRoute=function(method,url){var pathObj=parseRoute(url);return $httpBackend.when(method,pathObj.regexp,undefined,undefined,pathObj.keys)},$httpBackend.expect=function(method,url,data,headers,keys){var expectation=new MockHttpExpectation(method,url,data,headers,keys),chain={respond:function(status,data,headers,statusText){return expectation.response=createResponse(status,data,headers,statusText),chain}};return expectations.push(expectation),chain},createShortMethods("expect"),$httpBackend.expectRoute=function(method,url){var pathObj=parseRoute(url);return $httpBackend.expect(method,pathObj.regexp,undefined,undefined,pathObj.keys)},$httpBackend.flush=function(count,digest){if(digest!==!1&&$rootScope.$digest(),!responses.length)throw new Error("No pending request to flush !");if(angular.isDefined(count)&&null!==count)for(;count--;){if(!responses.length)throw new Error("No more pending request to flush !");responses.shift()()}else for(;responses.length;)responses.shift()();$httpBackend.verifyNoOutstandingExpectation(digest)},$httpBackend.verifyNoOutstandingExpectation=function(digest){if(digest!==!1&&$rootScope.$digest(),expectations.length)throw new Error("Unsatisfied requests: "+expectations.join(", "))},$httpBackend.verifyNoOutstandingRequest=function(){if(responses.length)throw new Error("Unflushed requests: "+responses.length)},$httpBackend.resetExpectations=function(){expectations.length=0,responses.length=0},$httpBackend}function MockHttpExpectation(method,url,data,headers,keys){this.data=data,this.headers=headers,this.match=function(m,u,d,h){return method!=m?!1:this.matchUrl(u)?angular.isDefined(d)&&!this.matchData(d)?!1:angular.isDefined(h)&&!this.matchHeaders(h)?!1:!0:!1},this.matchUrl=function(u){return url?angular.isFunction(url.test)?url.test(u):angular.isFunction(url)?url(u):url==u:!0},this.matchHeaders=function(h){return angular.isUndefined(headers)?!0:angular.isFunction(headers)?headers(h):angular.equals(headers,h)},this.matchData=function(d){return angular.isUndefined(data)?!0:data&&angular.isFunction(data.test)?data.test(d):data&&angular.isFunction(data)?data(d):data&&!angular.isString(data)?angular.equals(angular.fromJson(angular.toJson(data)),angular.fromJson(d)):data==d},this.toString=function(){return method+" "+url},this.params=function(u){function pathParams(){var keyObj={};if(!url||!angular.isFunction(url.test)||!keys||0===keys.length)return keyObj;var m=url.exec(u);if(!m)return keyObj;for(var i=1,len=m.length;len>i;++i){var key=keys[i-1],val=m[i];key&&val&&(keyObj[key.name||key]=val)}return keyObj}function parseQuery(){var key_value,key,obj={},queryStr=u.indexOf("?")>-1?u.substring(u.indexOf("?")+1):"";return angular.forEach(queryStr.split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),angular.isDefined(key))){var val=angular.isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?angular.isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}return angular.extend(parseQuery(),pathParams())}}function MockXhr(){MockXhr.$$lastInstance=this,this.open=function(method,url,async){this.$$method=method,this.$$url=url,this.$$async=async,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(data){this.$$data=data},this.setRequestHeader=function(key,value){this.$$reqHeaders[key]=value},this.getResponseHeader=function(name){var header=this.$$respHeaders[name];return header?header:(name=angular.lowercase(name),(header=this.$$respHeaders[name])?header:(header=undefined,angular.forEach(this.$$respHeaders,function(headerVal,headerName){header||angular.lowercase(headerName)!=name||(header=headerVal)}),header))},this.getAllResponseHeaders=function(){var lines=[];return angular.forEach(this.$$respHeaders,function(value,key){lines.push(key+": "+value)}),lines.join("\n")},this.abort=angular.noop}angular.mock={},angular.mock.$BrowserProvider=function(){this.$get=function(){return new angular.mock.$Browser}},angular.mock.$Browser=function(){var self=this;this.isMock=!0,self.$$url="http://server/",self.$$lastUrl=self.$$url,self.pollFns=[],self.$$completeOutstandingRequest=angular.noop,self.$$incOutstandingRequestCount=angular.noop,self.onUrlChange=function(listener){return self.pollFns.push(function(){(self.$$lastUrl!==self.$$url||self.$$state!==self.$$lastState)&&(self.$$lastUrl=self.$$url,self.$$lastState=self.$$state,listener(self.$$url,self.$$state))}),listener},self.$$applicationDestroyed=angular.noop,self.$$checkUrlChange=angular.noop,self.deferredFns=[],self.deferredNextId=0,self.defer=function(fn,delay){return delay=delay||0,self.deferredFns.push({time:self.defer.now+delay,fn:fn,id:self.deferredNextId}),self.deferredFns.sort(function(a,b){return a.time-b.time}),self.deferredNextId++},self.defer.now=0,self.defer.cancel=function(deferId){var fnIndex;return angular.forEach(self.deferredFns,function(fn,index){fn.id===deferId&&(fnIndex=index)}),angular.isDefined(fnIndex)?(self.deferredFns.splice(fnIndex,1),!0):!1},self.defer.flush=function(delay){if(angular.isDefined(delay))self.defer.now+=delay;else{if(!self.deferredFns.length)throw new Error("No deferred tasks to be flushed");self.defer.now=self.deferredFns[self.deferredFns.length-1].time}for(;self.deferredFns.length&&self.deferredFns[0].time<=self.defer.now;)self.deferredFns.shift().fn()},self.$$baseHref="/",self.baseHref=function(){return this.$$baseHref}},angular.mock.$Browser.prototype={poll:function(){angular.forEach(this.pollFns,function(pollFn){pollFn()})},url:function(url,replace,state){return angular.isUndefined(state)&&(state=null),url?(this.$$url=url,this.$$state=angular.copy(state),this):this.$$url},state:function(){return this.$$state},notifyWhenNoOutstandingRequests:function(fn){fn()}},angular.mock.$ExceptionHandlerProvider=function(){var handler;this.mode=function(mode){switch(mode){case"log":case"rethrow":var errors=[];handler=function(e){if(errors.push(1===arguments.length?e:[].slice.call(arguments,0)),"rethrow"===mode)throw e},handler.errors=errors;break;default:throw new Error("Unknown mode '"+mode+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return handler},this.mode("rethrow")},angular.mock.$LogProvider=function(){function concat(array1,array2,index){return array1.concat(Array.prototype.slice.call(array2,index))}var debug=!0;this.debugEnabled=function(flag){return angular.isDefined(flag)?(debug=flag,this):debug},this.$get=function(){var $log={log:function(){$log.log.logs.push(concat([],arguments,0))},warn:function(){$log.warn.logs.push(concat([],arguments,0))},info:function(){$log.info.logs.push(concat([],arguments,0))},error:function(){$log.error.logs.push(concat([],arguments,0))},debug:function(){debug&&$log.debug.logs.push(concat([],arguments,0))}};return $log.reset=function(){$log.log.logs=[],$log.info.logs=[],$log.warn.logs=[],$log.error.logs=[],$log.debug.logs=[]},$log.assertEmpty=function(){var errors=[];if(angular.forEach(["error","warn","info","log","debug"],function(logLevel){angular.forEach($log[logLevel].logs,function(log){angular.forEach(log,function(logItem){errors.push("MOCK $log ("+logLevel+"): "+String(logItem)+"\n"+(logItem.stack||""))})})}),errors.length)throw errors.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),errors.push(""),new Error(errors.join("\n---------\n"))},$log.reset(),$log}},angular.mock.$IntervalProvider=function(){this.$get=["$browser","$rootScope","$q","$$q",function($browser,$rootScope,$q,$$q){var repeatFns=[],nextRepeatId=0,now=0,$interval=function(fn,delay,count,invokeApply){function tick(){if(deferred.notify(iteration++),count>0&&iteration>=count){var fnIndex;deferred.resolve(iteration),angular.forEach(repeatFns,function(fn,index){fn.id===promise.$$intervalId&&(fnIndex=index)}),angular.isDefined(fnIndex)&&repeatFns.splice(fnIndex,1)}skipApply?$browser.defer.flush():$rootScope.$apply()}var hasParams=arguments.length>4,args=hasParams?Array.prototype.slice.call(arguments,4):[],iteration=0,skipApply=angular.isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=angular.isDefined(count)?count:0,promise.then(null,null,hasParams?function(){fn.apply(null,args)}:fn),promise.$$intervalId=nextRepeatId,repeatFns.push({nextTime:now+delay,delay:delay,fn:tick,id:nextRepeatId,deferred:deferred}),repeatFns.sort(function(a,b){return a.nextTime-b.nextTime}),nextRepeatId++,promise};return $interval.cancel=function(promise){if(!promise)return!1;var fnIndex;return angular.forEach(repeatFns,function(fn,index){fn.id===promise.$$intervalId&&(fnIndex=index)}),angular.isDefined(fnIndex)?(repeatFns[fnIndex].deferred.reject("canceled"),repeatFns.splice(fnIndex,1),!0):!1},$interval.flush=function(millis){for(now+=millis;repeatFns.length&&repeatFns[0].nextTime<=now;){var task=repeatFns[0];task.fn(),task.nextTime+=task.delay,repeatFns.sort(function(a,b){return a.nextTime-b.nextTime})}return millis},$interval}]};var R_ISO8061_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;if(angular.mock.TzDate=function(offset,timestamp){var self=new Date(0);if(angular.isString(timestamp)){var tsStr=timestamp;if(self.origDate=jsonStringToDate(timestamp),timestamp=self.origDate.getTime(),isNaN(timestamp))throw{name:"Illegal Argument",message:"Arg '"+tsStr+"' passed into TzDate constructor is not a valid date string"}}else self.origDate=new Date(timestamp);var localOffset=new Date(timestamp).getTimezoneOffset();self.offsetDiff=60*localOffset*1e3-1e3*offset*60*60,self.date=new Date(timestamp+self.offsetDiff),self.getTime=function(){return self.date.getTime()-self.offsetDiff},self.toLocaleDateString=function(){return self.date.toLocaleDateString()},self.getFullYear=function(){return self.date.getFullYear()},self.getMonth=function(){return self.date.getMonth()},self.getDate=function(){return self.date.getDate()},self.getHours=function(){return self.date.getHours()},self.getMinutes=function(){return self.date.getMinutes()},self.getSeconds=function(){return self.date.getSeconds()},self.getMilliseconds=function(){return self.date.getMilliseconds()},self.getTimezoneOffset=function(){return 60*offset},self.getUTCFullYear=function(){return self.origDate.getUTCFullYear()},self.getUTCMonth=function(){return self.origDate.getUTCMonth()},self.getUTCDate=function(){return self.origDate.getUTCDate()},self.getUTCHours=function(){return self.origDate.getUTCHours()},self.getUTCMinutes=function(){return self.origDate.getUTCMinutes()},self.getUTCSeconds=function(){return self.origDate.getUTCSeconds()},self.getUTCMilliseconds=function(){return self.origDate.getUTCMilliseconds()},self.getDay=function(){return self.date.getDay()},self.toISOString&&(self.toISOString=function(){return padNumber(self.origDate.getUTCFullYear(),4)+"-"+padNumber(self.origDate.getUTCMonth()+1,2)+"-"+padNumber(self.origDate.getUTCDate(),2)+"T"+padNumber(self.origDate.getUTCHours(),2)+":"+padNumber(self.origDate.getUTCMinutes(),2)+":"+padNumber(self.origDate.getUTCSeconds(),2)+"."+padNumber(self.origDate.getUTCMilliseconds(),3)+"Z"});var unimplementedMethods=["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"];return angular.forEach(unimplementedMethods,function(methodName){self[methodName]=function(){throw new Error("Method '"+methodName+"' is not implemented in the TzDate mock")}}),self},angular.mock.TzDate.prototype=Date.prototype,angular.mock.animate=angular.module("ngAnimateMock",["ng"]).config(["$provide",function($provide){$provide.factory("$$forceReflow",function(){function reflowFn(){reflowFn.totalReflows++}return reflowFn.totalReflows=0,reflowFn}),$provide.factory("$$animateAsyncRun",function(){var queue=[],queueFn=function(){return function(fn){queue.push(fn)}};return queueFn.flush=function(){if(0===queue.length)return!1;for(var i=0;i<queue.length;i++)queue[i]();return queue=[],!0},queueFn}),$provide.decorator("$animate",["$delegate","$timeout","$browser","$$rAF","$$forceReflow","$$animateAsyncRun","$rootScope",function($delegate,$timeout,$browser,$$rAF,$$forceReflow,$$animateAsyncRun,$rootScope){var animate={queue:[],cancel:$delegate.cancel,on:$delegate.on,off:$delegate.off,pin:$delegate.pin,get reflows(){return $$forceReflow.totalReflows},enabled:$delegate.enabled,flush:function(){$rootScope.$digest();var doNextRun,somethingFlushed=!1;do doNextRun=!1,$$rAF.queue.length&&($$rAF.flush(),doNextRun=somethingFlushed=!0),$$animateAsyncRun.flush()&&(doNextRun=somethingFlushed=!0);while(doNextRun);if(!somethingFlushed)throw new Error("No pending animations ready to be closed or flushed");$rootScope.$digest()}};return angular.forEach(["animate","enter","leave","move","addClass","removeClass","setClass"],function(method){animate[method]=function(){return animate.queue.push({event:method,element:arguments[0],options:arguments[arguments.length-1],args:arguments}),$delegate[method].apply($delegate,arguments)}}),animate}])}]),angular.mock.dump=function(object){function serialize(object){var out;return angular.isElement(object)?(object=angular.element(object),out=angular.element("<div></div>"),angular.forEach(object,function(element){out.append(angular.element(element).clone())}),out=out.html()):angular.isArray(object)?(out=[],angular.forEach(object,function(o){out.push(serialize(o))}),out="[ "+out.join(", ")+" ]"):out=angular.isObject(object)?angular.isFunction(object.$eval)&&angular.isFunction(object.$apply)?serializeScope(object):object instanceof Error?object.stack||""+object.name+": "+object.message:angular.toJson(object,!0):String(object),out}function serializeScope(scope,offset){offset=offset||"  ";var log=[offset+"Scope("+scope.$id+"): {"];for(var key in scope)Object.prototype.hasOwnProperty.call(scope,key)&&!key.match(/^(\$|this)/)&&log.push("  "+key+": "+angular.toJson(scope[key]));for(var child=scope.$$childHead;child;)log.push(serializeScope(child,offset+"  ")),child=child.$$nextSibling;return log.push("}"),log.join("\n"+offset)}return serialize(object)},angular.mock.$HttpBackendProvider=function(){this.$get=["$rootScope","$timeout",createHttpBackendMock]},angular.mock.$TimeoutDecorator=["$delegate","$browser",function($delegate,$browser){function formatPendingTasksAsString(tasks){var result=[];return angular.forEach(tasks,function(task){result.push("{id: "+task.id+", time: "+task.time+"}")}),result.join(", ")}return $delegate.flush=function(delay){$browser.defer.flush(delay)},$delegate.verifyNoPendingTasks=function(){if($browser.deferredFns.length)throw new Error("Deferred tasks to flush ("+$browser.deferredFns.length+"): "+formatPendingTasksAsString($browser.deferredFns))},$delegate}],angular.mock.$RAFDecorator=["$delegate",function($delegate){var rafFn=function(fn){var index=rafFn.queue.length;return rafFn.queue.push(fn),function(){rafFn.queue.splice(index,1)}};return rafFn.queue=[],rafFn.supported=$delegate.supported,rafFn.flush=function(){if(0===rafFn.queue.length)throw new Error("No rAF callbacks present");for(var length=rafFn.queue.length,i=0;length>i;i++)rafFn.queue[i]();rafFn.queue=rafFn.queue.slice(i)},rafFn}],angular.mock.$RootElementProvider=function(){this.$get=function(){return angular.element("<div ng-app></div>")}},angular.mock.$ControllerDecorator=["$delegate",function($delegate){return function(expression,locals,later,ident){if(later&&"object"==typeof later){var create=$delegate(expression,locals,!0,ident);return angular.extend(create.instance,later),create()}return $delegate(expression,locals,later,ident)}}],angular.module("ngMock",["ng"]).provider({$browser:angular.mock.$BrowserProvider,$exceptionHandler:angular.mock.$ExceptionHandlerProvider,$log:angular.mock.$LogProvider,$interval:angular.mock.$IntervalProvider,$httpBackend:angular.mock.$HttpBackendProvider,$rootElement:angular.mock.$RootElementProvider}).config(["$provide",function($provide){$provide.decorator("$timeout",angular.mock.$TimeoutDecorator),$provide.decorator("$$rAF",angular.mock.$RAFDecorator),$provide.decorator("$rootScope",angular.mock.$RootScopeDecorator),$provide.decorator("$controller",angular.mock.$ControllerDecorator)}]),angular.module("ngMockE2E",["ng"]).config(["$provide",function($provide){$provide.decorator("$httpBackend",angular.mock.e2e.$httpBackendDecorator)}]),angular.mock.e2e={},angular.mock.e2e.$httpBackendDecorator=["$rootScope","$timeout","$delegate","$browser",createHttpBackendMock],angular.mock.$RootScopeDecorator=["$delegate",function($delegate){function countChildScopes(){for(var currentScope,count=0,pendingChildHeads=[this.$$childHead];pendingChildHeads.length;)for(currentScope=pendingChildHeads.shift();currentScope;)count+=1,pendingChildHeads.push(currentScope.$$childHead),currentScope=currentScope.$$nextSibling;return count}function countWatchers(){for(var currentScope,count=this.$$watchers?this.$$watchers.length:0,pendingChildHeads=[this.$$childHead];pendingChildHeads.length;)for(currentScope=pendingChildHeads.shift();currentScope;)count+=currentScope.$$watchers?currentScope.$$watchers.length:0,pendingChildHeads.push(currentScope.$$childHead),currentScope=currentScope.$$nextSibling;return count}var $rootScopePrototype=Object.getPrototypeOf($delegate);return $rootScopePrototype.$countChildScopes=countChildScopes,$rootScopePrototype.$countWatchers=countWatchers,$delegate}],window.jasmine||window.mocha){var currentSpec=null,annotatedFunctions=[],isSpecRunning=function(){return!!currentSpec};angular.mock.$$annotate=angular.injector.$$annotate,angular.injector.$$annotate=function(fn){return"function"!=typeof fn||fn.$inject||annotatedFunctions.push(fn),angular.mock.$$annotate.apply(this,arguments)},(window.beforeEach||window.setup)(function(){annotatedFunctions=[],currentSpec=this}),(window.afterEach||window.teardown)(function(){var injector=currentSpec.$injector;annotatedFunctions.forEach(function(fn){delete fn.$inject}),angular.forEach(currentSpec.$modules,function(module){module&&module.$$hashKey&&(module.$$hashKey=undefined)}),currentSpec.$injector=null,currentSpec.$modules=null,currentSpec=null,injector&&injector.get("$rootElement").off(),angular.forEach(angular.element.fragments,function(val,key){delete angular.element.fragments[key]}),MockXhr.$$lastInstance=null,angular.forEach(angular.callbacks,function(val,key){delete angular.callbacks[key]}),angular.callbacks.counter=0}),window.module=angular.mock.module=function(){function workFn(){if(currentSpec.$injector)throw new Error("Injector already created, can not register a module!");var fn,modules=currentSpec.$modules||(currentSpec.$modules=[]);angular.forEach(moduleFns,function(module){fn=angular.isObject(module)&&!angular.isArray(module)?function($provide){angular.forEach(module,function(value,key){$provide.value(key,value)})}:module,currentSpec.$providerInjector?currentSpec.$providerInjector.invoke(fn):modules.push(fn)})}var moduleFns=Array.prototype.slice.call(arguments,0);return isSpecRunning()?workFn():workFn};var ErrorAddingDeclarationLocationStack=function(e,errorForStack){this.message=e.message,this.name=e.name,e.line&&(this.line=e.line),e.sourceId&&(this.sourceId=e.sourceId),e.stack&&errorForStack&&(this.stack=e.stack+"\n"+errorForStack.stack),e.stackArray&&(this.stackArray=e.stackArray)};ErrorAddingDeclarationLocationStack.prototype.toString=Error.prototype.toString,window.inject=angular.mock.inject=function(){function workFn(){var modules=currentSpec.$modules||[],strictDi=!!currentSpec.$injectorStrict;modules.unshift(function($injector){currentSpec.$providerInjector=$injector}),modules.unshift("ngMock"),modules.unshift("ng");var injector=currentSpec.$injector;injector||(strictDi&&angular.forEach(modules,function(moduleFn){"function"==typeof moduleFn&&angular.injector.$$annotate(moduleFn)}),injector=currentSpec.$injector=angular.injector(modules,strictDi),currentSpec.$injectorStrict=strictDi);for(var i=0,ii=blockFns.length;ii>i;i++){currentSpec.$injectorStrict&&injector.annotate(blockFns[i]);try{injector.invoke(blockFns[i]||angular.noop,this)}catch(e){if(e.stack&&errorForStack)throw new ErrorAddingDeclarationLocationStack(e,errorForStack);throw e}finally{errorForStack=null}}}var blockFns=Array.prototype.slice.call(arguments,0),errorForStack=new Error("Declaration Location");return isSpecRunning()?workFn.call(currentSpec):workFn},angular.mock.inject.strictDi=function(value){function workFn(){if(value!==currentSpec.$injectorStrict){if(currentSpec.$injector)throw new Error("Injector already created, can not modify strict annotations");currentSpec.$injectorStrict=value}}return value=arguments.length?!!value:!0,isSpecRunning()?workFn():workFn}}}(window,window.angular),angular.module("mocks.api").run(function(Mocks){Mocks.whenGET("/Notifications",function(){var now=new Date,result={timestamp:now.toISOString(),items:[{createdAt:new Date(now.getTime()-1e4).toISOString(),name:"Ruta Compartida",observation:"Juan Jorquera esta realizando una de tus rutas",image:"bundles/mocks/images/avatar1.png",readed:!1,type:{identifier:"INFO",name:"Información"}},{createdAt:new Date(now.getTime()-8e3).toISOString(),name:"Tienes un nuevo seguidor/a",observation:"Ligia Alcayaga a comenzado a seguirte",image:"bundles/mocks/images/avatar2.png",readed:!1,type:{identifier:"INFO",name:"Información"}},{createdAt:new Date(now.getTime()-6e3).toISOString(),name:"Actualización de Embajador",observation:"Chaleco Lopez acaba de compartir una nueva ruta",image:"bundles/mocks/images/avatar4.png",readed:!1,type:{identifier:"INFO",name:"Información"}},{createdAt:new Date(now.getTime()-4e3).toISOString(),name:"Nueva Medalla",observation:"Has ganado la medalla 'A la aventura'",image:"bundles/mocks/images/avatar5.png",readed:!1,type:{identifier:"INFO",name:"Información"}}]};return[200,result,{}]}),Mocks.whenPUT("/Notifications/MarkAsReaded",function(){return[200,{},{}]})}),angular.route("public.boot/index",function($scope,$log,$Configuration,Synchronizer,$q,ApplicationCleanse,$LocalStorage,$location){var stamps=$Configuration.get("localstorageStamps"),new_version_defer=$q.defer(),onBooted=function(){Synchronizer.start().then(function(){var url=$Configuration.get("application");$location.url(url.home)})};$q.all([new_version_defer.promise]).then(onBooted,function(err){$log.error(err)}),$LocalStorage.get(stamps.new_version)?(ApplicationCleanse.clean(!0).then(function(){new_version_defer.resolve()},function(err){new_version_defer.reject(err)}),$LocalStorage.remove(stamps.new_version)):new_version_defer.resolve()}),angular.route("exception.error/404",function(){console.log("404")}),angular.route("private.events/create/step-1",function($scope,$state,$log,$Api,$interval,$timeout,$q,$mdDialog,$galeDatepickerDialog,$mdConstant,$loadingDialog,$window,$Identity){$scope.model={user:$Identity.getCurrent(),event:{tags:[]},results:{items:[]},tags:{electricChars:[$mdConstant.KEY_CODE.ENTER,$mdConstant.KEY_CODE.COMMA,$mdConstant.KEY_CODE.TAB]}};for(var times=[],zeroDay=moment(0).startOf("day"),index=0;46>index;index++)index>0&&zeroDay.add(30,"minutes"),times.push({value:new Date(zeroDay.toDate()),label:zeroDay.format("HH:mm a").toUpperCase()});$scope.times=times,$scope.queryTags=function(query){var deferred=$q.defer();return $Api.kql("Events/Tags",{filters:[{property:"name",operator:"contains",value:query}]}).success(function(data){deferred.resolve(data.items)}),deferred.promise},$scope.setOrRegister=function(chip){return angular.isObject(chip)?chip:{name:chip}},$scope.find=function(tags){$scope.model.results.loading=!0,delete $scope.model.results.items;var query=_.pluck(tags,"name").join(",");$Api.read("Events/Search",{q:query}).success(function(data){$scope.model.results.items=data.items})["finally"](function(){$scope.model.results.loading=!1})},$scope.save=function(newEvent){var place_deferred=$q.defer(),knowledge_deferred=$q.defer();$loadingDialog.show({title:"Creando Evento..."}),$q.all([place_deferred.promise,knowledge_deferred.promise]).then(function(resolves){var place=resolves[0],knowledge=resolves[1],dateAndTime=moment(newEvent.date).add(newEvent.time.value);$Api.create("Events",{name:newEvent.name,description:newEvent.description,isRestricted:newEvent.isRestricted,isPrivate:newEvent.isPrivate,date:dateAndTime,place:place,knowledge:knowledge,tags:_.pluck(newEvent.tags,"name")})["finally"](function(){$loadingDialog.hide()})}),newEvent.place.token?place_deferred.resolve(newEvent.place.token):$Api.create("Places",newEvent.place).success(function(data){newEvent.place.token=data.token,place_deferred.resolve(data.token)}),newEvent.knowledge.token?knowledge_deferred.resolve(newEvent.knowledge.token):$Api.create("Knowledges",newEvent.knowledge).success(function(data){newEvent.knowledge.token=data.token,knowledge_deferred.resolve(data.token)}).error(function(error){knowledge_deferred.reject(error)})},$scope.cancel=function(){$window.history.back()},$scope.tooggleSettings=function(){var isShow=$scope.showAdvancedSettings=!$scope.showAdvancedSettings;isShow&&setTimeout(function(){window.scrollTo(0,500)},200)},$scope.showCalendar=function(ev,date){$galeDatepickerDialog.show(ev,{selected:date||new Date}).then(function(selectedDate){$scope.model.event.date=selectedDate})}}),angular.module("app.components").directive("commentsViewer",function($window){return{restrict:"E",scope:{event:"="},templateUrl:"views/events/view/dialogs/comments-viewer/comments-viewer.tpl.html",controller:function($scope,$element,$q,$Api,$log,$timeout){$scope.model={items:[]},fetch=function(){var offset=0,limit=5,totalRows=0,paginate=function(){return $Api.read("Events/{event}/Comments",{event:$scope.event,params:{limit:limit,offset:offset}}).success(function(data){offset+=data.items.length,totalRows=data.total})};return paginate().success(function(data){$scope.model.items=data.items}),{total:function(){return totalRows},nextPage:function(){return paginate()},hasNext:function(){return totalRows>0&&totalRows>offset}}};var delay=$timeout(function(){$scope.pagination=fetch(),$timeout.cancel(delay)},300);$scope.nextPage=function(){return $scope.pagination.nextPage().success(function(data){$scope.model.items=$scope.model.items.concat(data.items)})},$scope.hasNext=function(){return $scope.pagination.hasNext()}},link:function(scope,element){var headerHeight=68;element.find("md-content").css("height",$window.innerHeight-headerHeight+"px")}}}),angular.module("app.controllers").controller("EventDetailsDialogController",function($scope,$log,$timeout,$q,$Api,token,$mdDialog,$restrictedAccess,$mdSidenav){smoothDelay=250,$scope.model={panel:{},newcomment:{}},$Api.query("Events/{token}",{token:token}).success(function(data){$scope.model.event=data}),$scope.follow=function(event){$restrictedAccess.validate().then(function(){if(event.creator.following)var delay=$timeout(function(){$Api["delete"]("Accounts/{creator}/Follow",{creator:event.creator.token}).success(function(){event.creator.followers-=1,event.creator.following=!1}),$timeout.cancel(delay)},smoothDelay);else var delay=$timeout(function(){$Api.create("Accounts/{creator}/Follow",{creator:event.creator.token}).success(function(){event.creator.followers+=1,event.creator.following=!0}),$timeout.cancel(delay)},smoothDelay);event.creator.following=null})},$scope.join=function(event){$restrictedAccess.validate().then(function(){if("NONE"==event.joined)var delay=$timeout(function(){$Api.create("Events/{event}/Join",{event:event.token}).success(function(data){event.joined=data.state}),$timeout.cancel(delay)},smoothDelay);else var delay=$timeout(function(){$Api["delete"]("Events/{event}/Join",{event:event.token}).success(function(){event.joined="NONE"}),$timeout.cancel(delay)},smoothDelay);event.joined=null})},$scope.comment=function(event,newlyComment){$restrictedAccess.validate().then(function(){var delay=$timeout(function(){$Api.create("Events/{{event}}/Comments",{event:event.token,comment:newlyComment}).success(function(comment){event.lastComments.splice(0,0,comment)})["finally"](function(){newlyComment.comment="",newlyComment.isCreating=!1}),$timeout.cancel(delay)},smoothDelay);newlyComment.isCreating=!0})},$scope.showAllComments=function(){$scope.model.panel.comments=!0,$mdSidenav("eventDetailsRight").toggle()},$scope.showMap=function(place){var delay=$timeout(function(){$scope.panel={name:"map",place:place},$timeout.cancel(delay)},300);$mdSidenav("eventDetailsLeft").toggle()},$scope.cancel=function(){$mdDialog.cancel()}}),angular.route("public.home/index",function($scope,$state,$log,$Api,$interval,$timeout,$q,$mdConstant,$mdDialog,$restrictedAccess){$scope.model={image:{url:"landscape-1.jpg"},results:{items:[]},tags:{electricChars:[$mdConstant.KEY_CODE.ENTER,$mdConstant.KEY_CODE.COMMA,$mdConstant.KEY_CODE.TAB],items:[]}},$scope.queryTags=function(query){var deferred=$q.defer();return $Api.kql("Events/Tags",{filters:[{property:"name",operator:"contains",value:query}]}).success(function(data){deferred.resolve(data.items)}),deferred.promise},$scope.setOrRegister=function(chip){return angular.isObject(chip)?chip:{name:chip}},$scope.find=function(tags){$scope.model.results.loading=!0,delete $scope.model.results.items;var query=_.pluck(tags,"name").join(",");$Api.read("Events/Search",{q:query}).success(function(data){$scope.model.results.items=data.items})["finally"](function(){$scope.model.results.loading=!1})},$scope.onImageLoaded=function(){$scope.model.image.loaded=!0,$scope.find([{}])},$scope.showDetails=function(ev,item){$mdDialog.show({controller:"EventDetailsDialogController",templateUrl:"views/events/view/dialogs/eventDetails.tpl.html",clickOutsideToClose:!1,escapeToClose:!0,focusOnOpen:!1,fullscreen:!0,locals:{token:item.token}}).then(function(){})},$scope.createEvent=function(){$restrictedAccess.validate().then(function(){$state.go("private.events/create/step-1")});

}}),angular.module("app.layouts").controller("ExceptionLayoutController",function(){}),angular.module("app.layouts").controller("PrivateLayoutController",function($rootScope,$scope,$mdSidenav,$state,$log,$Configuration,$mdDialog,$mdToast,$stateParams,$timeout,$galeLoading,$Identity){$scope.user=$Identity.getCurrent(),$scope.config={application:$Configuration.get("application")},$scope.toogleMenu=function(side){$mdSidenav(side).toggle()},$scope.logout=function(){$Identity.logOut()}}),angular.module("app.layouts").controller("PublicLayoutController",function($rootScope,$scope,$mdSidenav,$state,$log,$Configuration,$mdDialog,$mdToast,$stateParams,$timeout,$galeLoading,$Identity){$Identity.isAuthenticated()&&($scope.user=$Identity.getCurrent()),$scope.config={application:$Configuration.get("application")},$scope.toogleMenu=function(side){$mdSidenav(side).toggle()},$scope.logout=function(){$Identity.logOut()}}),angular.route("security/identity/login",function($log,$Configuration,$Localization,$Api,$mdToast,$state,$timeout,$Identity,$scope,$location){$scope.signature=$Configuration.get("application"),$scope.user={};var changeState=function(new_state){var state={};switch(new_state){case"invalid":state={text:"login.state.valid.button",disabled:!0,icon:"action:lock_open"};break;case"valid":state={text:"login.state.valid.button",disabled:!1,icon:"action:lock_open"};break;case"validating":state={text:"login.state.validating.button",disabled:!0,icon:null}}state.name=new_state,$scope.state=state};$scope.isValidating=function(){return"validating"===$scope.state.name},$scope.onChange=function(form){changeState(form.$valid?"valid":"invalid")},$scope.login=function(credentials){changeState("validating"),$timeout(function(){$Identity.authenticate(credentials).success(function(){$location.url($scope.signature.home)}).error(function(error){var error_message=$Localization.get("ERR.API.UNAVAILABLE");error&&error.error_description&&(error_message=error.error_description),$mdToast.show($mdToast.simple().content(error_message).position("bottom left").hideDelay(3e3)),changeState("valid")})},500)},changeState("invalid")}),angular.route("security/identity/logout",function($Identity){$Identity.logOut()}),angular.route("security/identity/social",function($log,$Configuration,$mdToast,$state,$timeout,$Identity,$scope){$scope.signature=$Configuration.get("application"),$scope.onUpdateState=function(new_state){$scope.state=new_state},$scope.onAuthenticationFails=function(message){throw $mdToast.show($mdToast.simple().content(message).position("bottom left").hideDelay(3e3)),{message:message}},$scope.onAuthenticationSuccess=function(){$state.go("public.boot")}}),angular.module("App",["gale-material","app","material-icons","nvd3ChartDirectives","facebook","angularMoment","angularFileUpload","mocks"]).run(function($location){$location.path("/public/boot")}).config(function($ApiProvider,$uploadFileProvider,CONFIGURATION){$ApiProvider.setEndpoint(CONFIGURATION.API_Endpoint),$uploadFileProvider.setFileEndpoint(CONFIGURATION.API_Endpoint+"Files/")}).config(function(FacebookProvider){FacebookProvider.init("1559148417736822")}).config(function($IdentityProvider,SynchronizerProvider,MocksProvider){$IdentityProvider.enable().setLogInRoute("security/identity/social").setWhiteListResolver(function(toState){return toState.name.startsWith("exception.")||toState.name.startsWith("public.")?!0:!1}),SynchronizerProvider.autoLoadSynchronizers().frequency(45e3),MocksProvider.enable().setDelay(0)}).config(function(MocksProvider,SynchronizerProvider,ApplicationCleanseProvider,CONFIGURATION){CONFIGURATION.debugging&&(MocksProvider.debug(),SynchronizerProvider.debug(),ApplicationCleanseProvider.debug())}).config(function($mdThemingProvider){$mdThemingProvider.theme("default").primaryPalette("indigo").accentPalette("pink",{"hue-1":"50"}).warnPalette("red")}).config(function($stateProvider,$urlRouterProvider){$stateProvider.state("app",{url:"/app","abstract":!0,templateUrl:"views/layouts/one-page.html",controller:"OnePageLayoutController"}).state("exception",{url:"/exception","abstract":!0,templateUrl:"views/layouts/exception.html",controller:"ExceptionLayoutController"}).state("public",{url:"/public","abstract":!0,templateUrl:"views/layouts/public.html",controller:"PublicLayoutController"}).state("private",{url:"/private","abstract":!0,templateUrl:"views/layouts/private.html",controller:"PrivateLayoutController"}),$urlRouterProvider.otherwise(function($injector,$location){if("/"!==$location.path()){var $state=$injector.get("$state");$state.go("exception.error/404")}})}).config(function($logProvider,CONFIGURATION){$logProvider.debugEnabled(CONFIGURATION.debugging||!1)}),angular.module("config",[]).constant("GLOBAL_CONFIGURATION",{application:{version:"1.0.0-rc.1",environment:"qas",language:"es",name:"Widul",home:"public/home"},on_build_new_version:function(){localStorage.setItem("$_new_version",1)},localstorageStamps:{personal_data:"$_personal_data",new_version:"$_new_version"}});
=======
angular.manifiest("widul",["widul.directives","widul.filters","widul.services","widul.components"]),angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["a. m.","p. m."],DAY:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],ERANAMES:["antes de Cristo","después de Cristo"],ERAS:["a. C.","d. C."],FIRSTDAYOFWEEK:0,MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mié.","jue.","vie.","sáb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"dd-MM-y h:mm:ss a",mediumDate:"dd-MM-y",mediumTime:"h:mm:ss a","short":"dd-MM-yy h:mm a",shortDate:"dd-MM-yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤-",negSuf:"",posPre:"¤",posSuf:""}]},id:"es-cl",pluralCat:function(n){return 1===n?PLURAL_CATEGORY.ONE:PLURAL_CATEGORY.OTHER}})}]),function(factory){"function"==typeof define&&define.amd?define(["moment"],factory):"object"==typeof exports?module.exports=factory(require("../moment")):factory(("undefined"!=typeof global?global:this).moment)}(function(moment){var monthsShortDot="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),monthsShort="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return moment.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(m,format){return/-MMM-/.test(format)?monthsShort[m.month()]:monthsShortDot[m.month()]},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_SÃ¡".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}),angular.manifiest("app",["app.layouts","app.controllers","app.directives","app.filters","app.services","app.services.synchronizers","app.components"]),angular.module("app.components").directive("flexLoading",function(){return{restrict:"E",scope:{title:"@",legend:"@",spinner:"@"},templateUrl:"bundles/app/components/flex-loading/flex-loading.tpl.html",controller:function($scope){$scope.isIonic="undefined"!=typeof ionic,$scope.data={spinner:$scope.spinner||"lines"}},link:function(scope){var titles=["Widuleando Información"],images=["pesas-cuadrado.gif"],legends=["Las mejores y más bellas cosas del mundo no pueden ser tocadas o vistas-deben ser sentidas con el corazón","El éxito es ir de fracaso en fracaso sin perder el entusiasmo","Todos nuestros sueños se pueden hacer realidad si tenemos el coraje de perseguirlos","Si tienes todo bajo control, no te mueves lo suficientemente rápido","La acción es la llave fundamental de todo éxito","Lo que vale la pena hacerse, mejor hacerlo bien","La oportunidad para el éxito reside en la persona, no en el trabajo","El mejor argumento para decir algo, es la acción","Espera..., solo un poco mas","Ponte comodo mientras esperas...","Nos convertimos en lo que pensamos","No soy producto de mis circunstancias. Soy producto de mis decisiones","Comienza donde estas, usa lo que tienes, haz lo que puedes","Hecho es mejor que perfecto","Si haces lo que siempre has hecho, llegarás donde siempre has llegado","No esperes un cambio si haces siempre lo mismo","Cuando tienes un sueño, tienes que agarrarlo y nunca dejarlo ir"],titleOrdinal=Math.floor(Math.random()*titles.length)+0,legendOrdinal=Math.floor(Math.random()*legends.length)+0,imageOrdinal=Math.floor(Math.random()*images.length)+0;scope.data={title:scope.title||titles[titleOrdinal],legend:scope.legend||legends[legendOrdinal],image:scope.image||images[imageOrdinal]}}}}),angular.module("app.components").directive("galeInfiniteScroll",function(){return{scope:{onInfinite:"&",canLoadMore:"&",distance:"@"},templateUrl:"bundles/app/components/gale-infinite-scroll/gale-infinite-scroll.tpl.html",transclude:!0,controller:function($scope,$element){$scope.isLoading=$scope.isLoading||!1;var self=this;self.calculateDistance=function(distance){var scrollElm=$element[0],maxHeight=scrollElm.scrollTop+scrollElm.offsetHeight,distance=(distance||"2.5%").trim(),isPercent=-1!==distance.indexOf("%");return isPercent?parseFloat(distance)*maxHeight/100:parseFloat(distance)},$scope.$on("$destroy",function(){self.scrollCtrl&&self.scrollCtrl.$element&&self.scrollCtrl.$element.off("scroll",self.checkBounds),self.scrollEl&&self.scrollEl.removeEventListener&&self.scrollEl.removeEventListener("scroll",self.checkBounds)})},link:function(scope,element,attrs,ctrl){function reCalculateDistance(){distanceToHook=ctrl.calculateDistance()}var domElm=element[0],distanceToHook=null;element.bind("scroll",function(){if(distanceToHook||reCalculateDistance(),scope.isLoading===!1&&domElm.scrollTop+domElm.offsetHeight>=domElm.scrollHeight-distanceToHook&&scope.$eval(scope.canLoadMore)){scope.isLoading=!0;var defer=scope.onInfinite();defer&&defer.then?defer.then(function(){scope.isLoading=!1,reCalculateDistance()}):(scope.isLoading=!1,reCalculateDistance())}})}}}),angular.module("app.components").provider("$loadingDialog",function(){this.$get=function($log,$q,$mdDialog){var self={};return self.show=function(config){var deferred=$q.defer();return $mdDialog.show({controller:"LoadingDialogController",templateUrl:"bundles/app/components/loading-dialog/loading-dialog.tpl.html",targetEvent:config.targetEvent,clickOutsideToClose:!1,escapeToClose:!1,focusOnOpen:!1,locals:{config:config}}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self.hide=function(){$mdDialog.hide()},self}}),angular.module("app.components").controller("LoadingDialogController",function($scope,$log,config){var setting=config||{};$scope.title=setting.title||"Procesando Información",$scope.legend=setting.legend||"Espera mientras se ejecuta la solicitud"}),angular.module("app.components").directive("preloadImage",function(){return{restrict:"E",scope:{ngSrc:"=",onStart:"=",onComplete:"=",onError:"=",loadingTitle:"@",loadingLegend:"@",cssgramFilter:"@",loadingSpinner:"@",hideLoader:"="},templateUrl:"bundles/app/components/preload-image/preload-image.tpl.html",controller:function($scope,$element){$scope.loadingSpinner=$scope.loadingSpinner||"lines",$scope.hideLoader=$scope.hideLoader||!1,$scope._load=function(){var image=new Image;image.onload=function(){if("function"==typeof $scope.onComplete&&$scope.onComplete({width:this.width,height:this.height}),$scope.loadComplete=!0,"undefined"!=typeof ionic){var n=document.createTextNode(" ");$element.append(n),$element[0].style.webkitTransform="scale(1)"}try{$scope.$digest()}catch(e){}},image.onerror=function(){$scope.loadError=!0,"function"==typeof $scope.onError&&$scope.onError()},image.src=$scope.ngSrc,"function"==typeof $scope.onStart&&$scope.onStart(image)},$scope.ngSrc&&$scope._load($scope.ngSrc)},link:function($scope){$scope.$watch("ngSrc",function(value){value&&$scope._load(value)})}}}),angular.module("app.components").directive("externalAuthenticators",function(){return{restrict:"E",scope:{onAuthenticate:"=",onError:"=",onChangeState:"="},templateUrl:"bundles/app/components/security/external-authenticators/external-authenticators.tpl.html",controller:function($scope,$element,$q,$Configuration,$Identity,Facebook,$Api){$scope.signature=$Configuration.get("application");var changeState=function(new_state){var state={};switch(new_state){case"authorizing":state={disabled:!0};break;case"normal":state={disabled:!1}}state.name=new_state,$scope.state=state,$scope.onChangeState&&$scope.onChangeState(state)},throwError=function(message){changeState("normal"),$scope.onError(message)};$scope.login=function(type){switch(changeState("authorizing"),type){case"facebook":Facebook.login(function(response){if("connected"===response.status){var accessToken=response.authResponse.accessToken;Facebook.api("me/?fields=id,email,name,picture.type(large),location",function(data){data.accessToken=accessToken,data.image=data.picture.data.url,delete data.picture,$Api.create("/Security/Oauth/Facebook",data).success(function(oauthToken){$Identity.logIn(oauthToken),$scope.onAuthenticate(data)}).error(throwError)})}else throwError("FB Error: "+response.status)},{scope:"email,user_friends"});break;case"google":}},changeState("normal"),$scope.login("facebook")}}}),angular.module("app.components").directive("identityBox",function(){return{restrict:"E",scope:{},templateUrl:"bundles/app/components/security/identity-box/identity-box.tpl.html",controller:function($scope,$element,$q,$Identity,$rootScope,$restrictedAccess){var isAuthenticated=$scope.isAuthenticated=$Identity.isAuthenticated();isAuthenticated&&($scope.user=$Identity.getCurrent()),$scope.logIn=function(){$restrictedAccess.validate()},$scope.logOut=function(){$Identity.logOut({redirectToLoginPage:!1})},$rootScope.$on("auth-login-success",function(){isAuthenticated=$scope.isAuthenticated=!0,$scope.user=$Identity.getCurrent()}),$rootScope.$on("auth-logout-success",function(){isAuthenticated=$scope.isAuthenticated=!1,delete $scope.user})}}}),angular.module("app.components").directive("restrictedAccessDialog",function(){return{restrict:"E",scope:{onUpdateState:"=?",onAuthenticationFails:"=?",onAuthenticationSuccess:"=?"},templateUrl:"bundles/app/components/security/restricted-access/restricted-access-dialog.tpl.html",controller:function($scope,$element,$q,$Configuration,$mdToast,$timeout){function destroy(){$element.addClass("ng-hide");var delay=$timeout(function(){$element.remove(),$timeout.cancel(delay)},400)}$scope.signature=$Configuration.get("application"),$scope._onUpdateState=function(new_state){$scope.state=new_state,$scope.onUpdateState&&$scope.onUpdateState(new_state)},$scope._onAuthenticationFails=function(message){throw $mdToast.show($mdToast.simple().content("Error de Identificación: Intentalo denuevo!").position("bottom left").hideDelay(3e3)),destroy(),$scope.onAuthenticationFails&&$scope.onAuthenticationFails(message),{message:message}},$scope._onAuthenticationSuccess=function(identity){destroy(),$scope.onAuthenticationSuccess&&$scope.onAuthenticationSuccess(identity)},$scope.close=function(){$scope._onAuthenticationFails("user_cancel")},$scope.$on("$destroy",destroy)}}}),angular.module("app.components").provider("$restrictedAccess",function(){this.$get=function($log,$q,$timeout,$Identity,$compile,$rootScope){var self={};return self.validate=function(){var deferred=$q.defer(),delay=$timeout(function(){if($timeout.cancel(delay),$Identity.isAuthenticated())return void deferred.resolve();scope=$rootScope.$new(),scope.onAuthenticationFails=function(message){deferred.reject(message)},scope.onAuthenticationSuccess=function(identity){deferred.resolve(identity)};var dialog=$compile("<restricted-access-dialog class='ng-hide-animate ng-show-add' on-authentication-fails='onAuthenticationFails' on-authentication-success='onAuthenticationSuccess' />")(scope);angular.element(document.body).append(dialog)},0);return deferred.promise},self}}),angular.module("app.components").provider("$uploadFile",function(){var _endpoint=null;this.setFileEndpoint=function(endpoint){_endpoint=endpoint};var getFileEndpoint=function(){return _endpoint};this.$get=function($log,$Api){return _endpoint||(_endpoint=$Api.getEndpoint()+"/File/"),{getFileEndpoint:getFileEndpoint}}}),angular.module("app.components").directive("uploadFile",function(){return{restrict:"E",scope:{ngDisabled:"=",ngModel:"=",onStart:"&",onSend:"&",onProgressChange:"&",onComplete:"&",onError:"&"},templateUrl:"bundles/app/components/upload/upload-file.tpl.html",controller:function($scope,$element,$upload,$Identity,$uploadFile){$scope.ngDisabled=$scope.ngDisabled||!1;var getFileUrl=function(token){var url=$uploadFile.getFileEndpoint()+token;return $Identity.isAuthenticated()&&(url=url+"?access_token="+$Identity.getAccessToken()),url};$scope.ngModel&&($scope.fileUrl=getFileUrl($scope.ngModel)),$scope.upload=function(files){if(files&&files.length){$scope.uploadData={options:{thickness:5,mode:"gauge",total:100},progress:[{label:"Subiendo...",value:0,color:"#FF5722",suffix:"%"}]},$scope.onStart()&&$scope.onStart()(files);for(var throttled=_.throttle(function(value){$scope.onProgressChange()&&$scope.onProgressChange()(value),$scope.uploadData&&($scope.uploadData.progress[0].value=value)},300),_progress=function(evt){var progressPercentage=parseInt(100*evt.loaded/evt.total);throttled(progressPercentage)},_success=function(data,status,headers,config){var token=_.first(data).token,url=getFileUrl(token);if($scope.onComplete()){var custom_url=$scope.onComplete()(data,status,headers,config);custom_url&&(url=custom_url)}$scope.ngModel=token,$scope.fileUrl=url,$scope.uploadData=null},_error=function(data,status,headers,config){$scope.onError()&&$scope.onError()(data,status,headers,config),$scope.uploadData=null},i=0;i<files.length;i++){var file=files[i],headers={};$Identity.isAuthenticated()&&(headers.Authorization="{0} {1}".format([$Identity.getTokenType(),$Identity.getAccessToken()])),$scope.onSend()&&$scope.onSend()(headers);var config={url:$uploadFile.getFileEndpoint(),file:file,headers:headers};$upload.upload(config).progress(_progress).success(_success).error(_error)}}},$scope.$on("$destroy",function(){})},link:function(){}}}),angular.module("app.filters").filter("file",function($Api,$Identity,$Configuration,$uploadFile){return function(resource){var url=resource;return url?($Identity.isAuthenticated()&&(url+="?access_token="+$Identity.getAccessToken()),url=$uploadFile.getFileEndpoint()+url):null}}),angular.module("app.services").provider("ApplicationCleanse",function(){var $ref=this,_debug=!1;this.debug=function(){return _debug=!0,$ref},this.$get=function($log,$q){var self={};return self.clean=function(){var defer=$q.defer();return defer.resolve(),defer.promise},self}}),function(){var _module="app.services.synchronizers",_debug=!1,_autoLoad=!1,_autoStart=!1,_getReflectedSynchronizers=function($injector){var classes=[],services=angular.module(_module)._invokeQueue;return angular.forEach(services,function(ngClass){var type=ngClass[1],args=ngClass[2];if("service"===type&&args&&args.length>0&&"string"==typeof args[0]){var reflectedTypeName=args[0],reflectedType=$injector.get(reflectedTypeName);if("undefined"==typeof reflectedType.synchronize)throw{message:"Synchronizer: type {0} is not a synchronizer.".format([reflectedTypeName])};classes.push({type:reflectedTypeName,instance:reflectedType})}}),classes};angular.module(_module).provider("Synchronizer",function(){var $ref=this,StateType={INITIALIZED:1,CONFIGURATED:2,SYNCHRONIZING:3,WAITING:4,STOPPED:5},_frequency=15e3;this.frequency=function(frequency){return _frequency>0&&(_frequency=frequency),$ref},this.debug=function(){return _debug=!0,$ref},this.autoLoadSynchronizers=function(){return _autoLoad=!0,$ref},this.autoStart=function(){return _autoStart=!0,$ref},this.$get=function($log,$q,BaseEventHandler){var self=Object.create(BaseEventHandler),_synchronizers=[],_started=!1,checkIsPromise=function(synchronizer,value){if(!value.then)throw{message:"Synchronizer: You must return a promise (via $q) on method for {0}".format([synchronizer.alias])}};self.add=function(service,alias){_debug&&$log.debug("Synchronizer: add {0}".format([alias]),service);var synchronizer={alias:alias,state:StateType.INITIALIZED,instance:service};return _synchronizers.push(synchronizer),_started?configure(synchronizer):void 0},self.start=function(){var defer=$q.defer(),configures=[];return angular.forEach(_synchronizers,function(item){if(item.state===StateType.INITIALIZED){var promise=configure(item);configures.push(promise)}}),$q.all(configures).then(function(){_started=!0,angular.forEach(_synchronizers,function(item){item.state===StateType.INITIALIZED&&synchronize(item)}),defer.resolve()}),defer.promise};var configure=function(item){var deferred=null;return"function"==typeof item.instance.configure?(_debug&&$log.debug("Synchronizer: configuring {0}".format([item.alias])),deferred=item.instance.configure(),checkIsPromise(item,deferred),deferred.then(function(){_debug&&$log.debug("Synchronizer: configurated {0}".format([item.alias]))})):deferred=$q.defer().resolve().promise,deferred},synchronize=function(item){var syncStep=$q.defer();syncStep.promise.then(function(state){var end=new Date,sync_state={state:state,elapsed:moment(end-start).format("mm:ss.SSS")};item.last_synchronization=sync_state,_debug&&$log.debug("Synchronizer: {0} synchronized".format([item.alias]),sync_state),item.state=StateType.WAITING,setTimeout(function(){synchronize(item)},_frequency)}),_debug&&$log.debug("Synchronizer: {0} is synchronizing".format([item.alias]));var start=new Date;item.state=StateType.SYNCHRONIZING;var deferred=item.instance.synchronize();checkIsPromise(item,deferred),deferred.then(function(){syncStep.resolve("SUCCESS")},function(){syncStep.resolve("ERROR")})};return self}}).run(function(Synchronizer,$log,$injector){if(_autoLoad){var synchronizers=_getReflectedSynchronizers($injector);angular.forEach(synchronizers,function(synchronizer){Synchronizer.add(synchronizer.instance,synchronizer.type)})}_autoStart&&Synchronizer.start(),_debug&&$log.info("Synchronizer: Active")})}(),angular.module("app.services").service("Wizard",function(){var self={},wizard={};return self.addStep=function(data,identifier,prefix){if(!identifier)throw{message:"identifier can't be empty"};"undefined"==typeof prefix&&(prefix=identifier);var cloneData=angular.copy(data,{});wizard[identifier]={prefix:prefix,fields:cloneData}},self.getStep=function(identifier){return wizard[identifier]},self.clear=function(){wizard={}},self.toCollection=function(resolver){var collections=[];for(var section in wizard){var configuration=wizard[section];for(var fieldName in configuration.fields){var fullname=fieldName;configuration.prefix.length>0&&(fullname="{0}_{1}".format([configuration.prefix,fieldName]));var resolverValue,value=configuration.fields[fieldName];if(resolver&&(resolverValue=resolver(value,fieldName,fullname)),"undefined"!=typeof resolverValue?value=resolverValue:"object"==typeof value&&value.token&&(value=value.token),"undefined"==typeof value||null===value)throw{message:"can't resolve value for "+fullname};collections.push({name:fullname,value:value})}}return collections},self}),angular.module("material-icons",["ngMaterial"]).config(function($mdIconProvider){var bundle_src="bundles/material-icons/svg/icons/{0}-icons.svg";angular.forEach(["action","alert","av","communication","content","device","editor","file","hardware","icons","image","maps","navigation","notification","social","toggle"],function(toolset){$mdIconProvider.iconSet(toolset,bundle_src.format([toolset]),24)})}),function(){var api_endpoint=null,delay_response=0;angular.manifiest("mocks",["mocks.api"],["ngMockE2E"]).provider("Mocks",function(){var $ref=this,_enable=!1,_debug=!1;this.enable=function(){return _enable=!0,$ref},this.isEnabled=function(){return _enable},this.debug=function(){return _debug=!0,$ref},this.setDelay=function(miliseconds){return miliseconds>0&&(delay_response=miliseconds),$ref},this.$get=function($httpBackend,$Api){var endpoint=$Api.getEndpoint(),build=function(api){var exp=new RegExp(endpoint+api);return exp},when=function(verb,url,callback){if(_enable){verb=(verb||"GET").toUpperCase();return _debug&&console.debug("mock:",build(url)),$httpBackend.when(verb,build(url)).respond(callback)}};return{when:when,isEnabled:$ref.isEnabled,whenGET:function(url,callback){return when("GET",url,callback)},whenPOST:function(url,callback){return when("POST",url,callback)},whenPUT:function(url,callback){return when("PUT",url,callback)},whenDELETE:function(url,callback){return when("DELETE",url,callback)}}}}).config(function($provide){$provide.decorator("$httpBackend",function($delegate){var proxy=function(method,url,data,callback,headers){var interceptor=function(){var _this=this,_arguments=arguments;if(api_endpoint){var _delay=0;url.indexOf(api_endpoint)>=0&&(_delay=delay_response),setTimeout(function(){callback.apply(_this,_arguments)},_delay)}else callback.apply(_this,_arguments)};return $delegate.call(this,method,url,data,interceptor,headers)};for(var key in $delegate)proxy[key]=$delegate[key];return proxy})}).run(function($Api,$httpBackend){api_endpoint=$Api.getEndpoint(),$httpBackend.whenPOST(/.*/).passThrough(),$httpBackend.whenPUT(/.*/).passThrough(),$httpBackend.whenGET(/.*/).passThrough(),$httpBackend.whenDELETE(/.*/).passThrough()})}(),function(window,angular,undefined){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8061_STR)){var date=new Date(0),tzHour=0,tzMin=0;return match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),date.setUTCFullYear(toInt(match[1]),toInt(match[2])-1,toInt(match[3])),date.setUTCHours(toInt(match[4]||0)-tzHour,toInt(match[5]||0)-tzMin,toInt(match[6]||0),toInt(match[7]||0)),date}return string}function toInt(str){return parseInt(str,10)}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function createHttpBackendMock($rootScope,$timeout,$delegate,$browser){function createResponse(status,data,headers,statusText){return angular.isFunction(status)?status:function(){return angular.isNumber(status)?[status,data,headers,statusText]:[200,status,data,headers]}}function $httpBackend(method,url,data,callback,headers,timeout,withCredentials){function prettyPrint(data){return angular.isString(data)||angular.isFunction(data)||data instanceof RegExp?data:angular.toJson(data)}function wrapResponse(wrapped){function handleResponse(){var response=wrapped.response(method,url,data,headers,wrapped.params(url));xhr.$$respHeaders=response[2],callback(copy(response[0]),copy(response[1]),xhr.getAllResponseHeaders(),copy(response[3]||""))}function handleTimeout(){for(var i=0,ii=responses.length;ii>i;i++)if(responses[i]===handleResponse){responses.splice(i,1),callback(-1,undefined,"");break}}return!$browser&&timeout&&(timeout.then?timeout.then(handleTimeout):$timeout(handleTimeout,timeout)),handleResponse}var xhr=new MockXhr,expectation=expectations[0],wasExpected=!1;if(expectation&&expectation.match(method,url)){if(!expectation.matchData(data))throw new Error("Expected "+expectation+" with different data\nEXPECTED: "+prettyPrint(expectation.data)+"\nGOT:      "+data);if(!expectation.matchHeaders(headers))throw new Error("Expected "+expectation+" with different headers\nEXPECTED: "+prettyPrint(expectation.headers)+"\nGOT:      "+prettyPrint(headers));if(expectations.shift(),expectation.response)return void responses.push(wrapResponse(expectation));wasExpected=!0}for(var definition,i=-1;definition=definitions[++i];)if(definition.match(method,url,data,headers||{})){if(definition.response)($browser?$browser.defer:responsesPush)(wrapResponse(definition));else{if(!definition.passThrough)throw new Error("No response defined !");$delegate(method,url,data,callback,headers,timeout,withCredentials)}return}throw new Error(wasExpected?"No response defined !":"Unexpected request: "+method+" "+url+"\n"+(expectation?"Expected "+expectation:"No more request expected"))}function parseRoute(url){var ret={regexp:url},keys=ret.keys=[];return url&&angular.isString(url)?(url=url.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(_,slash,key,option){var optional="?"===option?option:null,star="*"===option?option:null;return keys.push({name:key,optional:!!optional}),slash=slash||"",""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+?)"||"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1"),ret.regexp=new RegExp("^"+url,"i"),ret):ret}function createShortMethods(prefix){angular.forEach(["GET","DELETE","JSONP","HEAD"],function(method){$httpBackend[prefix+method]=function(url,headers,keys){return $httpBackend[prefix](method,url,undefined,headers,keys)}}),angular.forEach(["PUT","POST","PATCH"],function(method){$httpBackend[prefix+method]=function(url,data,headers,keys){return $httpBackend[prefix](method,url,data,headers,keys)}})}var definitions=[],expectations=[],responses=[],responsesPush=angular.bind(responses,responses.push),copy=angular.copy;return $httpBackend.when=function(method,url,data,headers,keys){var definition=new MockHttpExpectation(method,url,data,headers,keys),chain={respond:function(status,data,headers,statusText){return definition.passThrough=undefined,definition.response=createResponse(status,data,headers,statusText),chain}};return $browser&&(chain.passThrough=function(){return definition.response=undefined,definition.passThrough=!0,chain}),definitions.push(definition),chain},createShortMethods("when"),$httpBackend.whenRoute=function(method,url){var pathObj=parseRoute(url);return $httpBackend.when(method,pathObj.regexp,undefined,undefined,pathObj.keys)},$httpBackend.expect=function(method,url,data,headers,keys){var expectation=new MockHttpExpectation(method,url,data,headers,keys),chain={respond:function(status,data,headers,statusText){return expectation.response=createResponse(status,data,headers,statusText),chain}};return expectations.push(expectation),chain},createShortMethods("expect"),$httpBackend.expectRoute=function(method,url){var pathObj=parseRoute(url);return $httpBackend.expect(method,pathObj.regexp,undefined,undefined,pathObj.keys)},$httpBackend.flush=function(count,digest){if(digest!==!1&&$rootScope.$digest(),!responses.length)throw new Error("No pending request to flush !");if(angular.isDefined(count)&&null!==count)for(;count--;){if(!responses.length)throw new Error("No more pending request to flush !");responses.shift()()}else for(;responses.length;)responses.shift()();$httpBackend.verifyNoOutstandingExpectation(digest)},$httpBackend.verifyNoOutstandingExpectation=function(digest){if(digest!==!1&&$rootScope.$digest(),expectations.length)throw new Error("Unsatisfied requests: "+expectations.join(", "))},$httpBackend.verifyNoOutstandingRequest=function(){if(responses.length)throw new Error("Unflushed requests: "+responses.length)},$httpBackend.resetExpectations=function(){expectations.length=0,responses.length=0},$httpBackend}function MockHttpExpectation(method,url,data,headers,keys){this.data=data,this.headers=headers,this.match=function(m,u,d,h){return method!=m?!1:this.matchUrl(u)?angular.isDefined(d)&&!this.matchData(d)?!1:angular.isDefined(h)&&!this.matchHeaders(h)?!1:!0:!1},this.matchUrl=function(u){return url?angular.isFunction(url.test)?url.test(u):angular.isFunction(url)?url(u):url==u:!0},this.matchHeaders=function(h){return angular.isUndefined(headers)?!0:angular.isFunction(headers)?headers(h):angular.equals(headers,h)},this.matchData=function(d){return angular.isUndefined(data)?!0:data&&angular.isFunction(data.test)?data.test(d):data&&angular.isFunction(data)?data(d):data&&!angular.isString(data)?angular.equals(angular.fromJson(angular.toJson(data)),angular.fromJson(d)):data==d},this.toString=function(){return method+" "+url},this.params=function(u){function pathParams(){var keyObj={};if(!url||!angular.isFunction(url.test)||!keys||0===keys.length)return keyObj;var m=url.exec(u);if(!m)return keyObj;for(var i=1,len=m.length;len>i;++i){var key=keys[i-1],val=m[i];key&&val&&(keyObj[key.name||key]=val)}return keyObj}function parseQuery(){var key_value,key,obj={},queryStr=u.indexOf("?")>-1?u.substring(u.indexOf("?")+1):"";return angular.forEach(queryStr.split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),angular.isDefined(key))){var val=angular.isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?angular.isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}return angular.extend(parseQuery(),pathParams())}}function MockXhr(){MockXhr.$$lastInstance=this,this.open=function(method,url,async){this.$$method=method,this.$$url=url,this.$$async=async,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(data){this.$$data=data},this.setRequestHeader=function(key,value){this.$$reqHeaders[key]=value},this.getResponseHeader=function(name){var header=this.$$respHeaders[name];return header?header:(name=angular.lowercase(name),(header=this.$$respHeaders[name])?header:(header=undefined,angular.forEach(this.$$respHeaders,function(headerVal,headerName){header||angular.lowercase(headerName)!=name||(header=headerVal)}),header))},this.getAllResponseHeaders=function(){var lines=[];return angular.forEach(this.$$respHeaders,function(value,key){lines.push(key+": "+value)}),lines.join("\n")},this.abort=angular.noop}angular.mock={},angular.mock.$BrowserProvider=function(){this.$get=function(){return new angular.mock.$Browser}},angular.mock.$Browser=function(){var self=this;this.isMock=!0,self.$$url="http://server/",self.$$lastUrl=self.$$url,self.pollFns=[],self.$$completeOutstandingRequest=angular.noop,self.$$incOutstandingRequestCount=angular.noop,self.onUrlChange=function(listener){return self.pollFns.push(function(){(self.$$lastUrl!==self.$$url||self.$$state!==self.$$lastState)&&(self.$$lastUrl=self.$$url,self.$$lastState=self.$$state,listener(self.$$url,self.$$state))}),listener},self.$$applicationDestroyed=angular.noop,self.$$checkUrlChange=angular.noop,self.deferredFns=[],self.deferredNextId=0,self.defer=function(fn,delay){return delay=delay||0,self.deferredFns.push({time:self.defer.now+delay,fn:fn,id:self.deferredNextId}),self.deferredFns.sort(function(a,b){return a.time-b.time}),self.deferredNextId++},self.defer.now=0,self.defer.cancel=function(deferId){var fnIndex;return angular.forEach(self.deferredFns,function(fn,index){fn.id===deferId&&(fnIndex=index)}),angular.isDefined(fnIndex)?(self.deferredFns.splice(fnIndex,1),!0):!1},self.defer.flush=function(delay){if(angular.isDefined(delay))self.defer.now+=delay;else{if(!self.deferredFns.length)throw new Error("No deferred tasks to be flushed");self.defer.now=self.deferredFns[self.deferredFns.length-1].time}for(;self.deferredFns.length&&self.deferredFns[0].time<=self.defer.now;)self.deferredFns.shift().fn()},self.$$baseHref="/",self.baseHref=function(){return this.$$baseHref}},angular.mock.$Browser.prototype={poll:function(){angular.forEach(this.pollFns,function(pollFn){pollFn()})},url:function(url,replace,state){return angular.isUndefined(state)&&(state=null),url?(this.$$url=url,this.$$state=angular.copy(state),this):this.$$url},state:function(){return this.$$state},notifyWhenNoOutstandingRequests:function(fn){fn()}},angular.mock.$ExceptionHandlerProvider=function(){var handler;this.mode=function(mode){switch(mode){case"log":case"rethrow":var errors=[];handler=function(e){if(errors.push(1===arguments.length?e:[].slice.call(arguments,0)),
"rethrow"===mode)throw e},handler.errors=errors;break;default:throw new Error("Unknown mode '"+mode+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return handler},this.mode("rethrow")},angular.mock.$LogProvider=function(){function concat(array1,array2,index){return array1.concat(Array.prototype.slice.call(array2,index))}var debug=!0;this.debugEnabled=function(flag){return angular.isDefined(flag)?(debug=flag,this):debug},this.$get=function(){var $log={log:function(){$log.log.logs.push(concat([],arguments,0))},warn:function(){$log.warn.logs.push(concat([],arguments,0))},info:function(){$log.info.logs.push(concat([],arguments,0))},error:function(){$log.error.logs.push(concat([],arguments,0))},debug:function(){debug&&$log.debug.logs.push(concat([],arguments,0))}};return $log.reset=function(){$log.log.logs=[],$log.info.logs=[],$log.warn.logs=[],$log.error.logs=[],$log.debug.logs=[]},$log.assertEmpty=function(){var errors=[];if(angular.forEach(["error","warn","info","log","debug"],function(logLevel){angular.forEach($log[logLevel].logs,function(log){angular.forEach(log,function(logItem){errors.push("MOCK $log ("+logLevel+"): "+String(logItem)+"\n"+(logItem.stack||""))})})}),errors.length)throw errors.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),errors.push(""),new Error(errors.join("\n---------\n"))},$log.reset(),$log}},angular.mock.$IntervalProvider=function(){this.$get=["$browser","$rootScope","$q","$$q",function($browser,$rootScope,$q,$$q){var repeatFns=[],nextRepeatId=0,now=0,$interval=function(fn,delay,count,invokeApply){function tick(){if(deferred.notify(iteration++),count>0&&iteration>=count){var fnIndex;deferred.resolve(iteration),angular.forEach(repeatFns,function(fn,index){fn.id===promise.$$intervalId&&(fnIndex=index)}),angular.isDefined(fnIndex)&&repeatFns.splice(fnIndex,1)}skipApply?$browser.defer.flush():$rootScope.$apply()}var hasParams=arguments.length>4,args=hasParams?Array.prototype.slice.call(arguments,4):[],iteration=0,skipApply=angular.isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=angular.isDefined(count)?count:0,promise.then(null,null,hasParams?function(){fn.apply(null,args)}:fn),promise.$$intervalId=nextRepeatId,repeatFns.push({nextTime:now+delay,delay:delay,fn:tick,id:nextRepeatId,deferred:deferred}),repeatFns.sort(function(a,b){return a.nextTime-b.nextTime}),nextRepeatId++,promise};return $interval.cancel=function(promise){if(!promise)return!1;var fnIndex;return angular.forEach(repeatFns,function(fn,index){fn.id===promise.$$intervalId&&(fnIndex=index)}),angular.isDefined(fnIndex)?(repeatFns[fnIndex].deferred.reject("canceled"),repeatFns.splice(fnIndex,1),!0):!1},$interval.flush=function(millis){for(now+=millis;repeatFns.length&&repeatFns[0].nextTime<=now;){var task=repeatFns[0];task.fn(),task.nextTime+=task.delay,repeatFns.sort(function(a,b){return a.nextTime-b.nextTime})}return millis},$interval}]};var R_ISO8061_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;if(angular.mock.TzDate=function(offset,timestamp){var self=new Date(0);if(angular.isString(timestamp)){var tsStr=timestamp;if(self.origDate=jsonStringToDate(timestamp),timestamp=self.origDate.getTime(),isNaN(timestamp))throw{name:"Illegal Argument",message:"Arg '"+tsStr+"' passed into TzDate constructor is not a valid date string"}}else self.origDate=new Date(timestamp);var localOffset=new Date(timestamp).getTimezoneOffset();self.offsetDiff=60*localOffset*1e3-1e3*offset*60*60,self.date=new Date(timestamp+self.offsetDiff),self.getTime=function(){return self.date.getTime()-self.offsetDiff},self.toLocaleDateString=function(){return self.date.toLocaleDateString()},self.getFullYear=function(){return self.date.getFullYear()},self.getMonth=function(){return self.date.getMonth()},self.getDate=function(){return self.date.getDate()},self.getHours=function(){return self.date.getHours()},self.getMinutes=function(){return self.date.getMinutes()},self.getSeconds=function(){return self.date.getSeconds()},self.getMilliseconds=function(){return self.date.getMilliseconds()},self.getTimezoneOffset=function(){return 60*offset},self.getUTCFullYear=function(){return self.origDate.getUTCFullYear()},self.getUTCMonth=function(){return self.origDate.getUTCMonth()},self.getUTCDate=function(){return self.origDate.getUTCDate()},self.getUTCHours=function(){return self.origDate.getUTCHours()},self.getUTCMinutes=function(){return self.origDate.getUTCMinutes()},self.getUTCSeconds=function(){return self.origDate.getUTCSeconds()},self.getUTCMilliseconds=function(){return self.origDate.getUTCMilliseconds()},self.getDay=function(){return self.date.getDay()},self.toISOString&&(self.toISOString=function(){return padNumber(self.origDate.getUTCFullYear(),4)+"-"+padNumber(self.origDate.getUTCMonth()+1,2)+"-"+padNumber(self.origDate.getUTCDate(),2)+"T"+padNumber(self.origDate.getUTCHours(),2)+":"+padNumber(self.origDate.getUTCMinutes(),2)+":"+padNumber(self.origDate.getUTCSeconds(),2)+"."+padNumber(self.origDate.getUTCMilliseconds(),3)+"Z"});var unimplementedMethods=["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"];return angular.forEach(unimplementedMethods,function(methodName){self[methodName]=function(){throw new Error("Method '"+methodName+"' is not implemented in the TzDate mock")}}),self},angular.mock.TzDate.prototype=Date.prototype,angular.mock.animate=angular.module("ngAnimateMock",["ng"]).config(["$provide",function($provide){$provide.factory("$$forceReflow",function(){function reflowFn(){reflowFn.totalReflows++}return reflowFn.totalReflows=0,reflowFn}),$provide.factory("$$animateAsyncRun",function(){var queue=[],queueFn=function(){return function(fn){queue.push(fn)}};return queueFn.flush=function(){if(0===queue.length)return!1;for(var i=0;i<queue.length;i++)queue[i]();return queue=[],!0},queueFn}),$provide.decorator("$animate",["$delegate","$timeout","$browser","$$rAF","$$forceReflow","$$animateAsyncRun","$rootScope",function($delegate,$timeout,$browser,$$rAF,$$forceReflow,$$animateAsyncRun,$rootScope){var animate={queue:[],cancel:$delegate.cancel,on:$delegate.on,off:$delegate.off,pin:$delegate.pin,get reflows(){return $$forceReflow.totalReflows},enabled:$delegate.enabled,flush:function(){$rootScope.$digest();var doNextRun,somethingFlushed=!1;do doNextRun=!1,$$rAF.queue.length&&($$rAF.flush(),doNextRun=somethingFlushed=!0),$$animateAsyncRun.flush()&&(doNextRun=somethingFlushed=!0);while(doNextRun);if(!somethingFlushed)throw new Error("No pending animations ready to be closed or flushed");$rootScope.$digest()}};return angular.forEach(["animate","enter","leave","move","addClass","removeClass","setClass"],function(method){animate[method]=function(){return animate.queue.push({event:method,element:arguments[0],options:arguments[arguments.length-1],args:arguments}),$delegate[method].apply($delegate,arguments)}}),animate}])}]),angular.mock.dump=function(object){function serialize(object){var out;return angular.isElement(object)?(object=angular.element(object),out=angular.element("<div></div>"),angular.forEach(object,function(element){out.append(angular.element(element).clone())}),out=out.html()):angular.isArray(object)?(out=[],angular.forEach(object,function(o){out.push(serialize(o))}),out="[ "+out.join(", ")+" ]"):out=angular.isObject(object)?angular.isFunction(object.$eval)&&angular.isFunction(object.$apply)?serializeScope(object):object instanceof Error?object.stack||""+object.name+": "+object.message:angular.toJson(object,!0):String(object),out}function serializeScope(scope,offset){offset=offset||"  ";var log=[offset+"Scope("+scope.$id+"): {"];for(var key in scope)Object.prototype.hasOwnProperty.call(scope,key)&&!key.match(/^(\$|this)/)&&log.push("  "+key+": "+angular.toJson(scope[key]));for(var child=scope.$$childHead;child;)log.push(serializeScope(child,offset+"  ")),child=child.$$nextSibling;return log.push("}"),log.join("\n"+offset)}return serialize(object)},angular.mock.$HttpBackendProvider=function(){this.$get=["$rootScope","$timeout",createHttpBackendMock]},angular.mock.$TimeoutDecorator=["$delegate","$browser",function($delegate,$browser){function formatPendingTasksAsString(tasks){var result=[];return angular.forEach(tasks,function(task){result.push("{id: "+task.id+", time: "+task.time+"}")}),result.join(", ")}return $delegate.flush=function(delay){$browser.defer.flush(delay)},$delegate.verifyNoPendingTasks=function(){if($browser.deferredFns.length)throw new Error("Deferred tasks to flush ("+$browser.deferredFns.length+"): "+formatPendingTasksAsString($browser.deferredFns))},$delegate}],angular.mock.$RAFDecorator=["$delegate",function($delegate){var rafFn=function(fn){var index=rafFn.queue.length;return rafFn.queue.push(fn),function(){rafFn.queue.splice(index,1)}};return rafFn.queue=[],rafFn.supported=$delegate.supported,rafFn.flush=function(){if(0===rafFn.queue.length)throw new Error("No rAF callbacks present");for(var length=rafFn.queue.length,i=0;length>i;i++)rafFn.queue[i]();rafFn.queue=rafFn.queue.slice(i)},rafFn}],angular.mock.$RootElementProvider=function(){this.$get=function(){return angular.element("<div ng-app></div>")}},angular.mock.$ControllerDecorator=["$delegate",function($delegate){return function(expression,locals,later,ident){if(later&&"object"==typeof later){var create=$delegate(expression,locals,!0,ident);return angular.extend(create.instance,later),create()}return $delegate(expression,locals,later,ident)}}],angular.module("ngMock",["ng"]).provider({$browser:angular.mock.$BrowserProvider,$exceptionHandler:angular.mock.$ExceptionHandlerProvider,$log:angular.mock.$LogProvider,$interval:angular.mock.$IntervalProvider,$httpBackend:angular.mock.$HttpBackendProvider,$rootElement:angular.mock.$RootElementProvider}).config(["$provide",function($provide){$provide.decorator("$timeout",angular.mock.$TimeoutDecorator),$provide.decorator("$$rAF",angular.mock.$RAFDecorator),$provide.decorator("$rootScope",angular.mock.$RootScopeDecorator),$provide.decorator("$controller",angular.mock.$ControllerDecorator)}]),angular.module("ngMockE2E",["ng"]).config(["$provide",function($provide){$provide.decorator("$httpBackend",angular.mock.e2e.$httpBackendDecorator)}]),angular.mock.e2e={},angular.mock.e2e.$httpBackendDecorator=["$rootScope","$timeout","$delegate","$browser",createHttpBackendMock],angular.mock.$RootScopeDecorator=["$delegate",function($delegate){function countChildScopes(){for(var currentScope,count=0,pendingChildHeads=[this.$$childHead];pendingChildHeads.length;)for(currentScope=pendingChildHeads.shift();currentScope;)count+=1,pendingChildHeads.push(currentScope.$$childHead),currentScope=currentScope.$$nextSibling;return count}function countWatchers(){for(var currentScope,count=this.$$watchers?this.$$watchers.length:0,pendingChildHeads=[this.$$childHead];pendingChildHeads.length;)for(currentScope=pendingChildHeads.shift();currentScope;)count+=currentScope.$$watchers?currentScope.$$watchers.length:0,pendingChildHeads.push(currentScope.$$childHead),currentScope=currentScope.$$nextSibling;return count}var $rootScopePrototype=Object.getPrototypeOf($delegate);return $rootScopePrototype.$countChildScopes=countChildScopes,$rootScopePrototype.$countWatchers=countWatchers,$delegate}],window.jasmine||window.mocha){var currentSpec=null,annotatedFunctions=[],isSpecRunning=function(){return!!currentSpec};angular.mock.$$annotate=angular.injector.$$annotate,angular.injector.$$annotate=function(fn){return"function"!=typeof fn||fn.$inject||annotatedFunctions.push(fn),angular.mock.$$annotate.apply(this,arguments)},(window.beforeEach||window.setup)(function(){annotatedFunctions=[],currentSpec=this}),(window.afterEach||window.teardown)(function(){var injector=currentSpec.$injector;annotatedFunctions.forEach(function(fn){delete fn.$inject}),angular.forEach(currentSpec.$modules,function(module){module&&module.$$hashKey&&(module.$$hashKey=undefined)}),currentSpec.$injector=null,currentSpec.$modules=null,currentSpec=null,injector&&injector.get("$rootElement").off(),angular.forEach(angular.element.fragments,function(val,key){delete angular.element.fragments[key]}),MockXhr.$$lastInstance=null,angular.forEach(angular.callbacks,function(val,key){delete angular.callbacks[key]}),angular.callbacks.counter=0}),window.module=angular.mock.module=function(){function workFn(){if(currentSpec.$injector)throw new Error("Injector already created, can not register a module!");var fn,modules=currentSpec.$modules||(currentSpec.$modules=[]);angular.forEach(moduleFns,function(module){fn=angular.isObject(module)&&!angular.isArray(module)?function($provide){angular.forEach(module,function(value,key){$provide.value(key,value)})}:module,currentSpec.$providerInjector?currentSpec.$providerInjector.invoke(fn):modules.push(fn)})}var moduleFns=Array.prototype.slice.call(arguments,0);return isSpecRunning()?workFn():workFn};var ErrorAddingDeclarationLocationStack=function(e,errorForStack){this.message=e.message,this.name=e.name,e.line&&(this.line=e.line),e.sourceId&&(this.sourceId=e.sourceId),e.stack&&errorForStack&&(this.stack=e.stack+"\n"+errorForStack.stack),e.stackArray&&(this.stackArray=e.stackArray)};ErrorAddingDeclarationLocationStack.prototype.toString=Error.prototype.toString,window.inject=angular.mock.inject=function(){function workFn(){var modules=currentSpec.$modules||[],strictDi=!!currentSpec.$injectorStrict;modules.unshift(function($injector){currentSpec.$providerInjector=$injector}),modules.unshift("ngMock"),modules.unshift("ng");var injector=currentSpec.$injector;injector||(strictDi&&angular.forEach(modules,function(moduleFn){"function"==typeof moduleFn&&angular.injector.$$annotate(moduleFn)}),injector=currentSpec.$injector=angular.injector(modules,strictDi),currentSpec.$injectorStrict=strictDi);for(var i=0,ii=blockFns.length;ii>i;i++){currentSpec.$injectorStrict&&injector.annotate(blockFns[i]);try{injector.invoke(blockFns[i]||angular.noop,this)}catch(e){if(e.stack&&errorForStack)throw new ErrorAddingDeclarationLocationStack(e,errorForStack);throw e}finally{errorForStack=null}}}var blockFns=Array.prototype.slice.call(arguments,0),errorForStack=new Error("Declaration Location");return isSpecRunning()?workFn.call(currentSpec):workFn},angular.mock.inject.strictDi=function(value){function workFn(){if(value!==currentSpec.$injectorStrict){if(currentSpec.$injector)throw new Error("Injector already created, can not modify strict annotations");currentSpec.$injectorStrict=value}}return value=arguments.length?!!value:!0,isSpecRunning()?workFn():workFn}}}(window,window.angular),angular.module("mocks.api").run(function(Mocks){Mocks.whenGET("/Notifications",function(){var now=new Date,result={timestamp:now.toISOString(),items:[{createdAt:new Date(now.getTime()-1e4).toISOString(),name:"Ruta Compartida",observation:"Juan Jorquera esta realizando una de tus rutas",image:"bundles/mocks/images/avatar1.png",readed:!1,type:{identifier:"INFO",name:"Información"}},{createdAt:new Date(now.getTime()-8e3).toISOString(),name:"Tienes un nuevo seguidor/a",observation:"Ligia Alcayaga a comenzado a seguirte",image:"bundles/mocks/images/avatar2.png",readed:!1,type:{identifier:"INFO",name:"Información"}},{createdAt:new Date(now.getTime()-6e3).toISOString(),name:"Actualización de Embajador",observation:"Chaleco Lopez acaba de compartir una nueva ruta",image:"bundles/mocks/images/avatar4.png",readed:!1,type:{identifier:"INFO",name:"Información"}},{createdAt:new Date(now.getTime()-4e3).toISOString(),name:"Nueva Medalla",observation:"Has ganado la medalla 'A la aventura'",image:"bundles/mocks/images/avatar5.png",readed:!1,type:{identifier:"INFO",name:"Información"}}]};return[200,result,{}]}),Mocks.whenPUT("/Notifications/MarkAsReaded",function(){return[200,{},{}]})}),angular.module("widul.components").directive("commentsViewer",function(){return{restrict:"E",scope:{event:"=",onAddComment:"&"},templateUrl:"bundles/widul/components/comments-viewer/comments-viewer.tpl.html",controller:function($scope,$element,$q,$Api,$log,$timeout,$restrictedAccess){$scope.model={},fetch=function(){var offset=0,limit=5,totalRows=0,paginate=function(){return $Api.read("Events/{event}/Comments",{event:$scope.event,params:{limit:limit,offset:offset}}).success(function(data){offset+=data.items.length,totalRows=data.total})};return paginate().success(function(data){$scope.model.items=data.items}),{total:function(){return totalRows},nextPage:function(){return paginate()},hasNext:function(){return totalRows>0&&totalRows>offset}}};var delay=$timeout(function(){$scope.pagination=fetch(),$timeout.cancel(delay)},300);$scope.comment=function(event,newlyComment){$restrictedAccess.validate().then(function(){var delay=$timeout(function(){$Api.create("Events/{{event}}/Comments",{event:$scope.event,comment:newlyComment}).success(function(comment){$scope.model.items.splice(0,0,comment),$scope.onAddComment()&&$scope.onAddComment()(comment)})["finally"](function(){newlyComment.comment="",newlyComment.isCreating=!1}),$timeout.cancel(delay)},250);newlyComment.isCreating=!0})},$scope.nextPage=function(){return $scope.pagination.nextPage().success(function(data){$scope.model.items=$scope.model.items.concat(data.items)})},$scope.hasNext=function(){return $scope.pagination.hasNext()}},link:function(){}}}),angular.module("widul.components").provider("$friendsSelectorDialog",function(){this.$get=function($log,$q,$mdDialog){var self={};return self.show=function(ev){var deferred=$q.defer();return $mdDialog.show({controller:"FriendsSelectorDialogController",templateUrl:"bundles/widul/components/friends-selector/friends-selector-dialog.tpl.html",targetEvent:ev,clickOutsideToClose:!1,escapeToClose:!1,focusOnOpen:!0}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self}}),angular.module("widul.components").controller("FriendsSelectorDialogController",function($scope,$log,$q,$mdDialog,$timeout,$Api){$scope.model={invites:[]},fetch=function(){var offset=0,limit=10,totalRows=0,paginate=function(){return $Api.read("Accounts/Me/Friends/",{limit:limit,offset:offset}).success(function(data){offset+=data.items.length,totalRows=data.total})};return paginate().success(function(data){$scope.model.friends=data.items}),{total:function(){return totalRows},nextPage:function(){return paginate()},hasNext:function(){return totalRows>0&&totalRows>offset}}},$scope.pagination=fetch(),$scope.friends={onSelect:function(friend){friend&&($scope.toggleFriend(friend),$scope.searchText="",$scope.friendsSelected=void 0),$timeout(function(){var elm=angular.element(document.getElementById("buggyAutocomplete"));elm.find("input").val("")},0)},onClear:function(){},find:function(query){var deferred=$q.defer();return $Api.kql("Accounts",{filters:[{property:"fullname",operator:"contains",value:query}],orderBy:{property:"fullname",order:"asc"}}).success(function(data){deferred.resolve(data.items)}),deferred.promise}},$scope.toggleFriend=function(friend,skipToggle){skipToggle||(friend.selected=!friend.selected),friend.selected?$scope.model.invites.push(friend):_.remove($scope.model.invites,{token:friend.token})},$scope.removeSelectedFriend=function(friend){friend.selected=!1,_.remove($scope.model.invites,{token:friend.token})},$scope.nextPage=function(){return $scope.pagination.nextPage().success(function(data){$scope.model.friends=$scope.model.friends.concat(data.items)})},$scope.hasNext=function(){return $scope.pagination.hasNext()},$scope.save=function(model){$mdDialog.hide(model.invites)},$scope.cancel=function(){$mdDialog.cancel()}}),angular.module("widul.components").directive("knowledgeSelector",function(){return{restrict:"E",require:["ngModel"],scope:{ngModel:"="},transclude:!0,templateUrl:"bundles/widul/components/knowledge-selector/knowledge-selector.tpl.html",compile:function(){return{post:function(scope,element,attrs){attrs.$observe("disabled",function(val){""===val&&(val=!0),scope.disabled=val})}}},controller:function($scope,$element,$knowledgeSelectorDialog){$scope.data={placeholder:$scope.placeholder,displayValue:null};var focusedClass="md-input-focused";$scope.show=function(ev){if(!$scope.disabled){var inputContainer=$element.parent();inputContainer.addClass(focusedClass),$knowledgeSelectorDialog.show(ev,{selected:$scope.ngModel,itemText:$scope.itemText,classToAdd:$element.attr("class")}).then(function(data){data&&($scope.ngModel=data),inputContainer.removeClass(focusedClass)},function(){inputContainer.removeClass(focusedClass)})}};var parent=$element.parent();if(parent.length>0){var label=parent.find("label");$scope.placeholder=label.html()}else $scope.placeholder=$element.attr("placeholder")}}}),angular.module("widul.components").provider("$knowledgeSelectorDialog",function(){this.$get=function($log,$q,$mdDialog){var self={};return self.show=function(ev,config){var deferred=$q.defer();return $mdDialog.show({controller:"KnowledgeSelectorDialogController",templateUrl:"bundles/widul/components/knowledge-selector/knowledge-selector-dialog.tpl.html",targetEvent:ev,clickOutsideToClose:!1,escapeToClose:!1,focusOnOpen:!0,locals:{config:config}}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self}}),angular.module("widul.components").controller("KnowledgeSelectorDialogController",function($scope,$log,$q,config,$mdDialog,$Api){$scope.model={},$scope.graph={},$Api.read("Knowledges/MostRequested").success(function(data){var graphData=[];angular.forEach(data,function(item){graphData.push({key:item.name,values:[[0,item.requested]]})}),$scope.graph={mostRequested:graphData}});var ordinal=0;if($scope.valueFormatFunction=function(){return function(d){var label=$scope.graph.mostRequested[ordinal].key+(" ("+d+")");return ordinal++,label}},$scope.knowledge={onSelect:function(knowledge){knowledge&&($scope.model={name:knowledge.name,token:knowledge.token})},onClear:function(name){$scope.model={name:name}},find:function(query){var deferred=$q.defer();return $Api.kql("Knowledges",{filters:[{property:"name",operator:"contains",value:query}]}).success(function(data){deferred.resolve(data.items)}),deferred.promise}},config.selected){var selected=angular.copy(config.selected);$scope.knowledgeSelected=selected}$scope.save=function(model){$mdDialog.hide(model)},$scope.cancel=function(){$mdDialog.cancel()}}),angular.module("widul.components").directive("googleMap",function(){return{restrict:"E",scope:{coordinates:"=",title:"=",readonly:"="},templateUrl:"bundles/widul/components/place-locator/google-map.tpl.html",controller:function($scope,$element,googleMapService){var coordinates=null,setMarker=function(coords){if("undefined"!=typeof google&&google.maps){var latLng={lat:coords.lat,lng:coords.lng},head=document.getElementsByTagName("head")[0],insertBeforeOriginal=head.insertBefore;head.insertBefore=function(newElement,referenceElement){newElement.href&&0===newElement.href.indexOf("http://fonts.googleapis.com/css?family=Roboto")||insertBeforeOriginal.call(head,newElement,referenceElement)};var config={zoom:14,center:latLng};$scope.readonly&&(config.disableDefaultUI=!0);var map=new google.maps.Map($element.find("map")[0],config),marker=new google.maps.Marker({position:latLng,map:map});if($scope.title){var infowindow=new google.maps.InfoWindow({content:$scope.title});infowindow.open(map,marker)}$scope.showLoading=!1}};googleMapService.load().then(function(){coordinates&&setMarker(coordinates)}),$scope.$watch("coordinates",function(value){value?(coordinates=value,setMarker(coordinates)):$scope.showLoading=!0})}}}),angular.module("widul.components").directive("placeLocator",function(){return{restrict:"E",require:["ngModel"],scope:{ngModel:"="},transclude:!0,templateUrl:"bundles/widul/components/place-locator/place-locator.tpl.html",compile:function(){return{post:function(scope,element,attrs){attrs.$observe("disabled",function(val){""===val&&(val=!0),scope.disabled=val})}}},controller:function($scope,$element,$placeLocatorDialog){$scope.data={placeholder:$scope.placeholder,displayValue:null};var focusedClass="md-input-focused";$scope.show=function(ev){if(!$scope.disabled){var inputContainer=$element.parent();inputContainer.addClass(focusedClass),$placeLocatorDialog.show(ev,{selected:$scope.ngModel,itemText:$scope.itemText,classToAdd:$element.attr("class")}).then(function(data){data&&($scope.ngModel=data),inputContainer.removeClass(focusedClass)},function(){inputContainer.removeClass(focusedClass)})}};var parent=$element.parent();if(parent.length>0){var label=parent.find("label");$scope.placeholder=label.html()}else $scope.placeholder=$element.attr("placeholder")}}}),angular.module("widul.components").provider("$placeLocatorDialog",function(){this.$get=function($log,$q,$mdDialog){var self={};return self.show=function(ev,config){var deferred=$q.defer();return $mdDialog.show({controller:"PlaceLocatorDialogController",templateUrl:"bundles/widul/components/place-locator/place-locator-dialog.tpl.html",targetEvent:ev,clickOutsideToClose:!1,escapeToClose:!1,focusOnOpen:!0,locals:{config:config}}).then(function(data){deferred.resolve(data)},function(){deferred.reject()}),deferred.promise},self}}),angular.module("widul.components").controller("PlaceLocatorDialogController",function($scope,$log,$q,config,$mdDialog,googleMapService,$Api){$scope.model={};var toLocatorPlace=function(apiPlace){return{token:apiPlace.token,name:apiPlace.name,tip:apiPlace.tip,capacity:apiPlace.capacity,address:{line:apiPlace.address,coordinates:{lat:apiPlace.lat,lng:apiPlace.lng}}}};if($scope.places={onSelect:function(place){place&&($scope.model=toLocatorPlace(place))},onClear:function(name){$scope.model={name:name}},find:function(query){var deferred=$q.defer();return $Api.query("Places",{filters:[{property:"name",operator:"contains",value:query}]}).success(function(data){deferred.resolve(data.items)}),deferred.promise}},$scope.address={onSelect:function(){},onClear:function(){},find:function(query){var deferred=$q.defer();return googleMapService.load().then(function(){var geocoder=new google.maps.Geocoder;geocoder.geocode({address:query},function(results,status){if(status===google.maps.GeocoderStatus.OK){var items=[];angular.forEach(results,function(result){items.push({line:result.formatted_address,coordinates:{lat:result.geometry.location.lat(),lng:result.geometry.location.lng()}})}),deferred.resolve(items)}else deferred.resolve([])})}),deferred.promise}},config.selected){var place=toLocatorPlace(config.selected);$scope.model=place,$scope.place=place}$scope.save=function(place){var data={name:place.name,address:place.address.line,lat:place.address.coordinates.lat,lng:place.address.coordinates.lng,capacity:place.capacity,tip:place.tip};place.token&&(data.token=place.token),$log.debug(data),$mdDialog.hide(data)},$scope.cancel=function(){$mdDialog.cancel()}}),angular.module("widul.components").service("googleMapService",function($window,$q){function loadScript(){var script=document.createElement("script");script.src="//maps.googleapis.com/maps/api/js?sensor=false&language=en&callback=initGoogleMaps",document.body.appendChild(script)}var deferreds=[];return{load:function(){var deferred=$q.defer();if("undefined"!=typeof google&&google.maps)deferred.resolve();else{if(deferreds.length>0)return deferreds.push(deferred),deferred.promise;$window.initGoogleMaps=function(){angular.forEach(deferreds,function(deferred){deferred.resolve()}),deferreds=[],delete $window.initGoogleMaps},deferreds.push(deferred),loadScript()}return deferred.promise}}}),angular.module("widul.components").directive("placeViewer",function(){return{restrict:"E",scope:{place:"="},templateUrl:"bundles/widul/components/place-viewer/place-viewer.tpl.html",controller:function($scope,$element,$q,$Api){$scope.model={},$Api.read("Places/{place}",{place:$scope.place}).success(function(data){$scope.model.place=data})},link:function(){}}}),angular.route("public.boot/index",function($scope,$log,$Configuration,Synchronizer,$q,ApplicationCleanse,$LocalStorage,$location){var stamps=$Configuration.get("localstorageStamps"),new_version_defer=$q.defer(),onBooted=function(){Synchronizer.start().then(function(){var path=$location.search().path;if(path.length<=2||0===path.indexOf("boot")||path.indexOf("exception")>0){var url=$Configuration.get("application");path=url.home}$location.url(path)})};$q.all([new_version_defer.promise]).then(onBooted,function(err){$log.error(err)}),$LocalStorage.get(stamps.new_version)?(ApplicationCleanse.clean(!0).then(function(){new_version_defer.resolve()},function(err){new_version_defer.reject(err)}),$LocalStorage.remove(stamps.new_version)):new_version_defer.resolve()}),angular.route("exception.error/404",function(){console.log("404")}),angular.route("private.events/create/step-1",function($scope,$state,$log,$Api,$interval,$timeout,$q,$mdDialog,$galeDatepickerDialog,$mdConstant,$loadingDialog,$window,$Identity){$scope.model={user:$Identity.getCurrent(),event:{tags:[]},results:{items:[]},tags:{electricChars:[$mdConstant.KEY_CODE.ENTER,$mdConstant.KEY_CODE.COMMA,$mdConstant.KEY_CODE.TAB]}};for(var times=[],zeroDay=moment(0).startOf("day"),index=0;46>index;index++)index>0&&zeroDay.add(30,"minutes"),times.push({value:new Date(zeroDay.toDate()),label:zeroDay.format("HH:mm a").toUpperCase()});$scope.times=times,$scope.queryTags=function(query){var deferred=$q.defer();return $Api.kql("Events/Tags",{filters:[{property:"name",operator:"contains",value:query}]}).success(function(data){deferred.resolve(data.items)}),deferred.promise},$scope.setOrRegister=function(chip){return angular.isObject(chip)?chip:{name:chip}},$scope.find=function(tags){$scope.model.results.loading=!0,delete $scope.model.results.items;var query=_.pluck(tags,"name").join(",");$Api.read("Events/Search",{q:query}).success(function(data){$scope.model.results.items=data.items})["finally"](function(){$scope.model.results.loading=!1})},$scope.save=function(newEvent){var place_deferred=$q.defer(),knowledge_deferred=$q.defer();$loadingDialog.show({title:"Creando Evento..."}),$q.all([place_deferred.promise,knowledge_deferred.promise]).then(function(resolves){var place=resolves[0],knowledge=resolves[1],dateAndTime=moment(newEvent.date).add(newEvent.time.value);$Api.create("Events",{name:newEvent.name,description:newEvent.description,isRestricted:newEvent.isRestricted,isPrivate:newEvent.isPrivate,date:dateAndTime,place:place,knowledge:knowledge,tags:_.pluck(newEvent.tags,"name")}).success(function(data){$state.go("public.events/view/resume/index",{token:data.token})})["finally"](function(){$loadingDialog.hide()})}),newEvent.place.token?place_deferred.resolve(newEvent.place.token):$Api.create("Places",newEvent.place).success(function(data){newEvent.place.token=data.token,place_deferred.resolve(data.token)}),newEvent.knowledge.token?knowledge_deferred.resolve(newEvent.knowledge.token):$Api.create("Knowledges",newEvent.knowledge).success(function(data){newEvent.knowledge.token=data.token,knowledge_deferred.resolve(data.token)}).error(function(error){knowledge_deferred.reject(error)})},$scope.cancel=function(){$window.history.back()},$scope.tooggleSettings=function(){var isShow=$scope.showAdvancedSettings=!$scope.showAdvancedSettings;isShow&&setTimeout(function(){window.scrollTo(0,500)},200)},$scope.showCalendar=function(ev,date){$galeDatepickerDialog.show(ev,{selected:date||new Date}).then(function(selectedDate){$scope.model.event.date=selectedDate})}}),angular.route("public.events/mail/approve/:event/:accessToken",function($scope,$state,$log,$Api,$stateParams,$restrictedAccess){
var goToEvent=function(){$state.go("public.events/view/resume/index",{token:$stateParams.event})};if($stateParams.accessToken){var customHeader={Authorization:"Bearer "+$stateParams.accessToken};$Api.create("Events/{event}/Join",{event:$stateParams.event},customHeader).success(function(){$restrictedAccess.validate().then(function(){goToEvent()})})}else goToEvent()}),angular.route("public.events/mail/reject/:event/:accessToken",function($scope,$state,$log,$Api,$stateParams,$restrictedAccess){var goToEvent=function(){$state.go("public.events/view/resume/index",{token:$stateParams.event})};if($stateParams.accessToken){var customHeader={Authorization:"Bearer "+$stateParams.accessToken};$Api["delete"]("Events/{event}/Join",{event:$stateParams.event},customHeader).success(function(){$restrictedAccess.validate().then(function(){goToEvent()})})}else goToEvent()}),angular.module("app.controllers").controller("EventDetailsDialogController",function($scope,$log,$timeout,$q,$Api,token,$mdDialog,$restrictedAccess,$mdSidenav){smoothDelay=250,$scope.model={panel:{},newcomment:{}},$Api.query("Events/{token}",{token:token}).success(function(data){$scope.model.event=data}),$scope.follow=function(event){$restrictedAccess.validate().then(function(){if(event.creator.following)var delay=$timeout(function(){$Api["delete"]("Accounts/{creator}/Follow",{creator:event.creator.token}).success(function(){event.creator.followers-=1,event.creator.following=!1}),$timeout.cancel(delay)},smoothDelay);else var delay=$timeout(function(){$Api.create("Accounts/{creator}/Follow",{creator:event.creator.token}).success(function(){event.creator.followers+=1,event.creator.following=!0}),$timeout.cancel(delay)},smoothDelay);event.creator.following=null})},$scope.join=function(event){$restrictedAccess.validate().then(function(){if("NONE"===event.joined)var delay=$timeout(function(){$Api.create("Events/{event}/Join",{event:event.token}).success(function(data){event.joined=data.state}),$timeout.cancel(delay)},smoothDelay);else var delay=$timeout(function(){$Api["delete"]("Events/{event}/Join",{event:event.token}).success(function(){event.joined="NONE"}),$timeout.cancel(delay)},smoothDelay);event.joined=null})},$scope.comment=function(event,newlyComment){$restrictedAccess.validate().then(function(){var delay=$timeout(function(){$Api.create("Events/{{event}}/Comments",{event:event.token,comment:newlyComment}).success(function(comment){event.lastComments.splice(0,0,comment)})["finally"](function(){newlyComment.comment="",newlyComment.isCreating=!1}),$timeout.cancel(delay)},smoothDelay);newlyComment.isCreating=!0})},$scope.showAllComments=function(){$scope.model.panel.comments=!0,$mdSidenav("eventDetailsRight").toggle()},$scope.showMap=function(place){var delay=$timeout(function(){$scope.panel={name:"map",place:place},$timeout.cancel(delay)},300);$mdSidenav("eventDetailsLeft").toggle()},$scope.cancel=function(){$mdDialog.cancel()}}),angular.route("public.events/view/resume/index/:token",function($scope,$state,$log,$Api,$q,$window,$stateParams,$Identity,$timeout,$mdSidenav,$friendsSelectorDialog,$loadingDialog,Facebook,$Configuration,$restrictedAccess,$rootScope){$scope.model={},$rootScope.$on("auth-login-success",function(){$scope.model.user=$Identity.getCurrent(),getPersonalnformation()}),$rootScope.$on("auth-logout-success",function(){delete $scope.model.user,delete $scope.model.personal});var refresh=$scope.refresh=function(){$Api.query("Events/{token}",{token:$stateParams.token}).success(function(data){$scope.model.event.participants=data.participants,$scope.model.event.comments.total=data.comments.total})},getPersonalnformation=function(){var deferred=$q.defer();return $Api.query("Events/{token}/Personal",{token:$stateParams.token}).success(function(data){$scope.model.personal=data,deferred.resolve(data)}).error(deferred.reject),deferred.promise},smooth=function(callback){var smoothDelay=250,delay=$timeout(function(){callback(),$timeout.cancel(delay)},smoothDelay)},deferreds=[$Api.query("Events/{token}",{token:$stateParams.token})];$Identity.isAuthenticated()&&(deferreds.push(getPersonalnformation()),$scope.model.user=$Identity.getCurrent()),$q.all(deferreds).then(function(resolves){$scope.model.event=resolves[0]}),$scope.invite=function(ev){$restrictedAccess.validate().then(function(){$friendsSelectorDialog.show(ev).then(function(guests){$loadingDialog.show(ev);var invitations=_.pluck(guests,"token");$Api.create("Events/{event}/Invitations",{event:$scope.model.event.token,data:invitations}).success(function(){$loadingDialog.hide(),refresh()}).error($loadingDialog.hide)})})},$scope.follow=function(event){$restrictedAccess.validate().then(function(){var personal=$scope.model.personal;smooth(personal.creator.following?function(){$Api["delete"]("Accounts/{creator}/Follow",{creator:event.creator.token}).success(function(){event.creator.followers-=1,personal.creator.following=!1})}:function(){$Api.create("Accounts/{creator}/Follow",{creator:event.creator.token}).success(function(){event.creator.followers+=1,personal.creator.following=!0})}),personal.creator.following=null})},$scope.join=function(event){var defer=$q.defer();defer.promise.then(function(participation){smooth("NONE"===participation.state||"INVITED"===participation.state?function(){$Api.create("Events/{event}/Join",{event:event.token}).success(function(data){participation.state=data.state,refresh()})}:function(){$Api["delete"]("Events/{event}/Join",{event:event.token}).success(function(){participation.state="NONE",refresh()})}),participation.state=null}),$restrictedAccess.validate().then(function(){$scope.model.personal?defer.resolve($scope.model.personal.participation):getPersonalnformation().then(function(data){"JOINED"!==data.participation.state&&defer.resolve(data.participation)})})},$scope.share=function(ev,event){$restrictedAccess.validate().then(function(){var api_url=$Configuration.get("API_Endpoint"),picture=[api_url,"Events/",event.token,"/Thumbnail?",(new Date).getTime()].join("");Facebook.ui({method:"share",href:$window.location.href,title:event.name,picture:picture,caption:event.place.address,description:event.description},function(){})})},$scope.showMap=function(){smooth(function(){$scope.panel="PLAC"}),$mdSidenav("mapPanel").toggle()},$scope.showComments=function(){smooth(function(){$scope.panel="COMM"}),$mdSidenav("commentsPanel").toggle()},$scope.addComment=function(model){$restrictedAccess.validate().then(function(){$scope.showComments(model)})},$scope.cancel=function(){$window.history.back()}}),angular.route("public.home/index",function($scope,$state,$log,$Api,$interval,$timeout,$q,$mdConstant,$mdDialog,$restrictedAccess){$scope.model={image:{url:"landscape-1.jpg"},results:{items:[]},tags:{electricChars:[$mdConstant.KEY_CODE.ENTER,$mdConstant.KEY_CODE.COMMA,$mdConstant.KEY_CODE.TAB],items:[]}},$scope.queryTags=function(query){var deferred=$q.defer();return $Api.kql("Events/Tags",{filters:[{property:"name",operator:"contains",value:query}]}).success(function(data){deferred.resolve(data.items)}),deferred.promise},$scope.setOrRegister=function(chip){return angular.isObject(chip)?chip:{name:chip}},$scope.find=function(tags){$scope.model.results.loading=!0,delete $scope.model.results.items;var query=_.pluck(tags,"name").join(",");$Api.read("Events/Search",{q:query}).success(function(data){$scope.model.results.items=data.items})["finally"](function(){$scope.model.results.loading=!1})},$scope.onImageLoaded=function(){$scope.model.image.loaded=!0,$scope.find([{}])},$scope.showDetails=function(ev,item){$state.go("public.events/view/resume/index",{token:item.token})},$scope.createEvent=function(){$restrictedAccess.validate().then(function(){$state.go("private.events/create/step-1")})}}),angular.module("app.layouts").controller("ExceptionLayoutController",function(){}),angular.module("app.layouts").controller("PrivateLayoutController",function($rootScope,$scope,$mdSidenav,$state,$log,$Configuration,$mdDialog,$mdToast,$stateParams,$timeout,$galeLoading,$Identity){$scope.user=$Identity.getCurrent(),$scope.config={application:$Configuration.get("application")},$scope.toogleMenu=function(side){$mdSidenav(side).toggle()},$scope.logout=function(){$Identity.logOut()}}),angular.module("app.layouts").controller("PublicLayoutController",function($rootScope,$scope,$mdSidenav,$state,$log,$Configuration,$mdDialog,$mdToast,$stateParams,$timeout,$galeLoading,$Identity){$Identity.isAuthenticated()&&($scope.user=$Identity.getCurrent()),$scope.config={application:$Configuration.get("application")},$scope.toogleMenu=function(side){$mdSidenav(side).toggle()},$scope.logout=function(){$Identity.logOut()}}),angular.route("security/identity/login",function($log,$Configuration,$Localization,$Api,$mdToast,$state,$timeout,$Identity,$scope,$location){$scope.signature=$Configuration.get("application"),$scope.user={};var changeState=function(new_state){var state={};switch(new_state){case"invalid":state={text:"login.state.valid.button",disabled:!0,icon:"action:lock_open"};break;case"valid":state={text:"login.state.valid.button",disabled:!1,icon:"action:lock_open"};break;case"validating":state={text:"login.state.validating.button",disabled:!0,icon:null}}state.name=new_state,$scope.state=state};$scope.isValidating=function(){return"validating"===$scope.state.name},$scope.onChange=function(form){changeState(form.$valid?"valid":"invalid")},$scope.login=function(credentials){changeState("validating"),$timeout(function(){$Identity.authenticate(credentials).success(function(){$location.url($scope.signature.home)}).error(function(error){var error_message=$Localization.get("ERR.API.UNAVAILABLE");error&&error.error_description&&(error_message=error.error_description),$mdToast.show($mdToast.simple().content(error_message).position("bottom left").hideDelay(3e3)),changeState("valid")})},500)},changeState("invalid")}),angular.route("security/identity/logout",function($Identity){$Identity.logOut()}),angular.route("security/identity/social",function($log,$Configuration,$mdToast,$state,$timeout,$Identity,$scope){$scope.signature=$Configuration.get("application"),$scope.onUpdateState=function(new_state){$scope.state=new_state},$scope.onAuthenticationFails=function(message){throw $mdToast.show($mdToast.simple().content(message).position("bottom left").hideDelay(3e3)),{message:message}},$scope.onAuthenticationSuccess=function(){$state.go("public.boot")}}),angular.module("App",["gale-material","app","widul","material-icons","nvd3ChartDirectives","facebook","angularMoment","angularFileUpload","mocks"]).run(function($location){var currentPath=$location.path(),boot=$location.path("public/boot").search({path:currentPath});$location.url(boot.url())}).config(function($ApiProvider,$uploadFileProvider,CONFIGURATION){$ApiProvider.setEndpoint(CONFIGURATION.API_Endpoint),$uploadFileProvider.setFileEndpoint(CONFIGURATION.API_Endpoint+"Files/")}).config(function(FacebookProvider){FacebookProvider.init("1559148417736822")}).config(function($IdentityProvider,SynchronizerProvider,MocksProvider){$IdentityProvider.enable().setLogInRoute("security/identity/social").setWhiteListResolver(function(toState){return toState.name.startsWith("boot")||toState.name.startsWith("exception.")||toState.name.startsWith("public.")?!0:!1}),SynchronizerProvider.autoLoadSynchronizers().frequency(45e3),MocksProvider.enable().setDelay(0)}).config(function(MocksProvider,SynchronizerProvider,ApplicationCleanseProvider,CONFIGURATION){CONFIGURATION.debugging&&(MocksProvider.debug(),SynchronizerProvider.debug(),ApplicationCleanseProvider.debug())}).config(function($mdThemingProvider){$mdThemingProvider.theme("default").primaryPalette("indigo").accentPalette("pink",{"hue-1":"50"}).warnPalette("red")}).config(function($stateProvider,$urlRouterProvider){$stateProvider.state("app",{url:"/app","abstract":!0,templateUrl:"views/layouts/one-page.html",controller:"OnePageLayoutController"}).state("exception",{url:"/exception","abstract":!0,templateUrl:"views/layouts/exception.html",controller:"ExceptionLayoutController"}).state("public",{url:"/public","abstract":!0,templateUrl:"views/layouts/public.html",controller:"PublicLayoutController"}).state("private",{url:"/private","abstract":!0,templateUrl:"views/layouts/private.html",controller:"PrivateLayoutController"}),$urlRouterProvider.otherwise(function($injector,$location){if("/"!==$location.path()){var $state=$injector.get("$state"),$log=$injector.get("$log");$log.error("404",$location),$state.go("exception.error/404")}})}).config(function($logProvider,CONFIGURATION){$logProvider.debugEnabled(CONFIGURATION.debugging||!1)}),angular.module("config",[]).constant("GLOBAL_CONFIGURATION",{application:{version:"1.0.0-rc.1",environment:"qas",language:"es",name:"Widul",home:"public/home"},on_build_new_version:function(){localStorage.setItem("$_new_version",1)},localstorageStamps:{personal_data:"$_personal_data",new_version:"$_new_version"}});
>>>>>>> release/v1.0.0-rc.2
//# sourceMappingURL=application.min.js.map